<?xml version="1.0" encoding="UTF-8" ?>
<project name="CoviDB - Pre-Release Data Specification" id="Project_2a8906a" database="Sqlite" >
	<comment><![CDATA[Version 1.0.0-rc1]]></comment>
	<schema name="covidb" >
		<table name="culture_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="culture_data_id" type="integer" length="0" decimal="0" jt="4" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="culture_type" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Type of culture obtained.
1 = Bacterial culture (aerobic)
2 = Bacterial culture (anaerobic)
3 = Fungal culture
4 = Mycobacterial culture]]></comment>
			</column>
			<column name="culture_status" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Current status of the culture:
1 = Resulted
2 = Pending
3 = Rejected
4 = Cancelled
5 = Other]]></comment>
			</column>
			<column name="culture_loinc_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[LOINC code of the culture being performed.]]></comment>
			</column>
			<column name="culture_sample_site" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Site from which the culture sample was collected.
1 = Expectorated sputum
2 = Endotracheal aspirate
3 = Bronchoalveolar lavage
4 = Pleural fluid
5 = Ascites fluid
6 = Blood culture
7 = Urine culture
8 = CSF culture
9 = Other]]></comment>
			</column>
			<column name="culture_sample_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with time zone, of sampling.]]></comment>
			</column>
			<column name="culture_result_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with time zone, indicating the time at which the culture was resulted.]]></comment>
			</column>
			<column name="culture_gram_positive" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[Equals true if the Gram stain is positive.]]></comment>
			</column>
			<column name="culture_growth_positive" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[Equals true if the culture yielded growth of a pathogen in significant quantities (e.g. any quantity for blood, > 10^3 CFUs for LBA sputum)]]></comment>
			</column>
			<column name="culture_result_organisms" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[Comma-separated list of organisms that have grown on the culture medium. Organisms should be stated with their full name (e.g. Staphylococcus aureus).]]></comment>
			</column>
			<index name="pk_culture_data_id" unique="PRIMARY_KEY" >
				<column name="culture_data_id" />
			</index>
			<fk name="fk_culture_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="diagnosis_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="episode_data_id" type="integer" length="0" decimal="0" jt="4" >
				<comment><![CDATA[Identifier referencing episode during which a diagnosis was made.]]></comment>
			</column>
			<column name="diagnosis_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="diagnosis_type" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Type of diagnosis recorded.
1 = comorbidity prior to admission (BDCP type 1)
2 = comorbidity after admission (BDCP type 2)
3 = primary diagnosis (BDCP type M)
4 = secondary diagnosis (BDCP type 3)

Reference: Canadian Norms for Codification of Medical Diagnoses, https://bit.ly/346yCHg]]></comment>
			</column>
			<column name="diagnosis_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Name of diagnosis that was recorded.

Could be in: { viral pneumonitis, bacterial pneumonia, acute respiratory distress syndrome, pneumothorax, pleural effusion, cryptogenic organizing pneumonia, bronchiolitis, meningitis, seizure, stroke, congestive heart failure, endocarditis, myocarditis, pericarditis, atrial fibrillation, ventricular tachycardia/ventricular fibrillation, STEMI, NSTEMI, cardiac arrest, bactermia, disseminated intravascular coagulation, anemia, rhabdomyolysis, acute renal injury, acute renal failure, gastrointestinal hemorrhage, pancreatitis, liver dysfunction, hyperglycemia, hypoglycemia, home oxygen therapy, outpatient dialysis }]]></comment>
			</column>
			<column name="diagnosis_icd_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[ICD-10 code referencing the diagnosis.]]></comment>
			</column>
			<column name="diagnosis_source" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Data source from which the diagnosis occurred.]]></comment>
			</column>
			<index name="pk_outcome_data_id" unique="PRIMARY_KEY" >
				<column name="diagnosis_id" />
			</index>
			<fk name="fk_diagnosis_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
			<fk name="fk_diagnosis_data_episode_data" to_schema="covidb" to_table="episode_data" >
				<fk_column name="episode_data_id" pk="episode_data_id" />
			</fk>
		</table>
		<table name="drug_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="drug_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" />
			<column name="drug_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Generic name of drug that was administered.]]></comment>
			</column>
			<column name="drug_din_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Standard Drug Identification Number (DIN).

Reference: https://bit.ly/2R8jPGC]]></comment>
			</column>
			<column name="drug_class" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Standard drug class.]]></comment>
			</column>
			<column name="drug_infusion" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[True if the drug is administered via a continuous infusion.]]></comment>
			</column>
			<column name="drug_dose" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Dose of the drug administered at a time.]]></comment>
			</column>
			<column name="drug_rate" type="float" decimal="0" jt="7" >
				<comment><![CDATA[Drug infusion rate, for continuous infusions.]]></comment>
			</column>
			<column name="drug_roa" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Drug route of administration short name, as defined by FDA standards (e.g. IV, SC, PO). 

Reference: https://bit.ly/3dRlo5z]]></comment>
			</column>
			<column name="drug_frequency" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[(If drug_infusion is FALSE). Frequency of drug administration, in number of times per day.]]></comment>
			</column>
			<column name="drug_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timezone, with timestamp, indicating the time at which the drug was started.]]></comment>
			</column>
			<column name="drug_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timezone, with timestamp, indicating the time at which the drug was stopped.]]></comment>
			</column>
			<index name="pk_drug_data_id" unique="PRIMARY_KEY" >
				<column name="drug_data_id" />
			</index>
			<fk name="fk_drug_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="episode_data" >
			<comment><![CDATA[Start and end type of patient presence on unit, with accompanying metadata.]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="episode_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="episode_unit_type" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Type of unit:
1 = Outpatient clinic
2 = Emergency room
3 = Hospital ward
4 = High-dependency unit
5 = Intensive care unit]]></comment>
			</column>
			<column name="episode_ctas" type="date" length="0" decimal="0" jt="91" >
				<comment><![CDATA[CTAS (Canadian Triage and Acuity Scale) level for initial presentation in ER.
Level 1 = Resuscitation
Level 2 = Emergent
Level 3 = Urgent
Level 4 = Less urgent
Level 5 = Non urgent

Should be blank unless episode_unit_type == 2.]]></comment>
			</column>
			<column name="episode_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, of when the episode started (e.g. triaged in the emergency room).]]></comment>
			</column>
			<column name="episode_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, of when the episode ended (e.g. discharged from the emergency room).]]></comment>
			</column>
			<index name="pk_episode_data_id" unique="PRIMARY_KEY" >
				<column name="episode_data_id" />
			</index>
			<fk name="fk_episode_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="exposure_data" >
			<comment><![CDATA[Exposure dates and types.]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="exposure_data_id" type="integer" length="0" decimal="0" jt="4" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="exposure_type_id" type="integer" length="0" decimal="0" jt="4" >
				<comment><![CDATA[Identifier referencing the type of exposure.]]></comment>
			</column>
			<column name="exposure_total" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Cumulative exposure, if quantifiable. E.g. number of pack years smoked.]]></comment>
			</column>
			<column name="exposure_details" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Free text with additional details on exposure.]]></comment>
			</column>
			<column name="exposure_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with time zone, indicating when the exposure occurred (for a one-time exposure), or started (for an prolonged exposure).]]></comment>
			</column>
			<column name="exposure_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with time zone, indicating when the exposure ended.]]></comment>
			</column>
			<index name="pk_exposure_data_id" unique="PRIMARY_KEY" >
				<column name="exposure_data_id" />
			</index>
			<fk name="fk_exposure_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
			<fk name="fk_exposure_data_exposure_type" to_schema="covidb" to_table="exposure_type" >
				<fk_column name="exposure_type_id" pk="exposure_type_id" />
			</fk>
		</table>
		<table name="exposure_type" >
			<column name="exposure_type_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="exposure_type_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Name of exposure type.]]></comment>
			</column>
			<column name="exposure_type_description" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Description of exposure.]]></comment>
			</column>
			<column name="exposure_type_total_units" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Units determining how the exposure is cumulated (e.g. pack-years for smoking).]]></comment>
			</column>
			<index name="pk_exposure_type_exposure_type_id" unique="PRIMARY_KEY" >
				<column name="exposure_type_id" />
			</index>
		</table>
		<table name="imaging_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="imaging_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="imaging_accession_number" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Accession number of the imaging on the site's local PACS database.]]></comment>
			</column>
			<column name="imaging_modality" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Modality of the imaging that was performed, as defined by the DICOM "Modality" header (DICOM standard section C.7.3.1).

Examples: CT, XR, US.

Reference: https://bit.ly/2X8Yv7Q]]></comment>
			</column>
			<column name="imaging_iv_contrast" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[True if intravenous contrast was given during the imaging study.]]></comment>
			</column>
			<column name="imaging_manufacturer" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Manufacturer of the equipment that was used to acquire imaging, as defined by the DICOM "Manufacturer header."]]></comment>
			</column>
			<column name="imaging_acquisition_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, representing the time at which the study was performed.]]></comment>
			</column>
			<column name="imaging_report_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the imaging was reported.]]></comment>
			</column>
			<column name="imaging_report_text" type="varchar" length="250" decimal="0" jt="12" >
				<comment><![CDATA[De-identified textual report of the imaging.]]></comment>
			</column>
			<index name="pk_study_data_id" unique="PRIMARY_KEY" >
				<column name="imaging_data_id" />
			</index>
			<fk name="fk_imaging_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="intervention_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="drug_data_id" type="integer" length="0" decimal="0" jt="4" />
			<column name="intervention_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="intervention_type_id" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Identifier referencing the type of intervention.]]></comment>
			</column>
			<column name="intervention_details" type="varchar" length="100" decimal="0" jt="12" />
			<column name="intervention_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the intervention was initiated.]]></comment>
			</column>
			<column name="intervention_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the intervention was completed.]]></comment>
			</column>
			<index name="pk_intervention_data_id" unique="PRIMARY_KEY" >
				<column name="intervention_data_id" />
			</index>
			<index name="unq_intervention_data_intervention_type_id" unique="UNIQUE" >
				<column name="intervention_type_id" />
			</index>
			<fk name="fk_intervention_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
			<fk name="fk_intervention_data_drug_data" to_schema="covidb" to_table="drug_data" >
				<fk_column name="drug_data_id" pk="drug_data_id" />
			</fk>
		</table>
		<table name="intervention_type" >
			<column name="intervention_type_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="intervention_name" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Name of intervention. E.g. prone ventilation, inhaled nitric oxide, tracheostomy, extracorporeal support.]]></comment>
			</column>
			<column name="intervention_invasiveness" type="bigint" decimal="0" jt="-5" >
				<comment><![CDATA[Level of invasiveness of the intervention type:
1 = noninvasive intervention (e.g. proning)
2 = drug administration
3 = invasive bedside procedure (e.g. central line)
4 = open surgical procedure (e.g. tracheostomy)]]></comment>
			</column>
			<index name="pk_respiratory_data_id" unique="PRIMARY_KEY" >
				<column name="intervention_type_id" />
			</index>
			<fk name="fk_intervention_data_intervention_type" to_schema="covidb" to_table="intervention_data" >
				<fk_column name="intervention_type_id" pk="intervention_type_id" />
			</fk>
		</table>
		<table name="lab_data" >
			<comment><![CDATA[Contains data related to laboratory tests.]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="lab_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="lab_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Name of laboratory test. 

Reference: https://bit.ly/2UGF5pp

Could be in: { haemoglobin, WBC count, lymphocyte count, neutrophil count, hematocrit, platelets, APTT, PT, INR, ALT, total bilirubin, AST, glucose, urea, lactate, creatinine, sodium, potassium, procalcitonin, CRP, LDH, D-dimer, fibrinogen, ferritin, triglycerides, IL-6, CD4, CD8, CD4/CD8 ratio, NT-proBNP, troponin, hsT, hsTnI, TnT, TnI }]]></comment>
			</column>
			<column name="lab_loinc_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[LOINC code for the laboratory test.]]></comment>
			</column>
			<column name="lab_cerner_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Code for laboratory test.

Reference (for CERNER): https://bit.ly/2UGF5pp]]></comment>
			</column>
			<column name="lab_units" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Reporting units for the lab test.

Could be in: { g/L, g/dL, 10^9 cells/L, 10^3 cells/microL, cells/microL, seconds, U/L, micromol/L, mg/L, mg/dL, mmol/L, mg/dL, mEq/L }]]></comment>
			</column>
			<column name="lab_status" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Current status of the culture:
1 = Resulted
2 = Pending
3 = Rejected
4 = Cancelled
5 = Other]]></comment>
			</column>
			<column name="lab_sample_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timezone, with timestamp, indicating the time at which the laboratory test was sampled.]]></comment>
			</column>
			<column name="lab_sample_type" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Type of specimen sample.
1 = Venous blood
2 = Arterial blood
3 = Capillary blood
4 = Urine
5 = Other
6 = Unspecified]]></comment>
			</column>
			<column name="lab_result_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timezone, with timestamp, indicating the time at which the laboratory test was resulted.]]></comment>
			</column>
			<column name="lab_result_value" type="float" decimal="0" jt="7" >
				<comment><![CDATA[Value of the laboratory result.]]></comment>
			</column>
			<index name="pk_lab_data_lab_data_id" unique="PRIMARY_KEY" >
				<column name="lab_data_id" />
			</index>
			<fk name="fk_lab_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="observation_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="observation_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="observation_type_id" type="integer" length="0" decimal="0" jt="4" mandatory="y" />
			<column name="observation_device" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Device that was used to perform the observation (e.g. blood pressure cuff, arterial line).]]></comment>
			</column>
			<column name="observation_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the observation started.]]></comment>
			</column>
			<column name="observation_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the observation ended. Empty if the observation is made at a single point in time.]]></comment>
			</column>
			<index name="pk_clinical_data_id" unique="PRIMARY_KEY" >
				<column name="observation_data_id" />
			</index>
			<fk name="fk_observation_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
			<fk name="fk_observation_data_observation_type" to_schema="covidb" to_table="observation_type" >
				<fk_column name="observation_type_id" pk="observation_type_id" />
			</fk>
		</table>
		<table name="observation_type" >
			<column name="observation_type_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="observation_category" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Values:
1 = Observation from clinical interaction only (e.g. capillary refill)
2 = Observation derived from a score or rule (e.g. AVPU scale)
3 = Observation from a measurement device (e.g. blood pressure)
4 = Observation derived from a setting on a device (e.g. PEEP)]]></comment>
			</column>
			<column name="observation_name" type="varchar" decimal="0" jt="12" mandatory="y" >
				<comment><![CDATA[Name of observation (e.g. temperature, heart rate).]]></comment>
			</column>
			<column name="observation_units" type="varchar" decimal="0" jt="12" mandatory="y" >
				<comment><![CDATA[Units for this type of observation.]]></comment>
			</column>
			<column name="observation_regexp" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Regular expression used to validate observations.]]></comment>
			</column>
			<index name="pk_observation_types_observation_id" unique="PRIMARY_KEY" >
				<column name="observation_type_id" />
			</index>
		</table>
		<table name="patient_data" >
			<comment><![CDATA[Table for temporally invariant patient characteristics.]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Primary key of this table. Globally unique identifier for a patient with a given RAMQ number. Generated deterministically from RAMQ number via PBKDF2. Not traceable back to patient; follows NIST best practices for cryptographically secure storage of password keys.

Procedure for generation: https://bit.ly/39ANAXa]]></comment>
			</column>
			<column name="patient_site_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Per-site unique identifier, generated deterministically from unique local site ID via PBKDF2. 

Procedure for generation: https://bit.ly/39ANAXa]]></comment>
			</column>
			<column name="patient_site_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Standardized code for the site at which the data was acquired.

Reference codes: https://bit.ly/2Jyw7nN]]></comment>
			</column>
			<column name="patient_transfer_site_code" type="date" length="0" decimal="0" jt="91" >
				<comment><![CDATA[Site code of the transferring institution, if the patient has been transferred from elsewhere.]]></comment>
			</column>
			<column name="patient_covid_status" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[COVID status of the patient.
1 = Positive at current site
2 = Negative at current site
3 = Positive at other site (transferred + patient)
4 = Negative at other site (transferred - patient)
5 = Test result pending
6 = Not tested for COVID
7 = Recovered patient]]></comment>
			</column>
			<column name="patient_birth_date" type="date" length="0" decimal="0" jt="91" >
				<comment><![CDATA[Birth date of the patient. Should be replaced by patient_age, computed as per the most recent birth date, in de-identified data exports.]]></comment>
			</column>
			<column name="patient_sex" type="char" length="1" decimal="0" jt="1" >
				<comment><![CDATA[Equals "F" if the patient's is female, "M" if the patient's sex is male, "X" if the patient's sex is other than male or female.]]></comment>
			</column>
			<column name="patient_birth_country" type="char" length="2" decimal="0" jt="1" >
				<comment><![CDATA[Country of origin, as 2-letter ISO 3166 code (e.g. CA).]]></comment>
			</column>
			<column name="patient_ethnicity" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Ethnicity of the patient, as defined by WHO CRF.
1 = Arab
2 = Black
3 = East Asian
4 = South Asian
5 = West Asian
6 = Latin American
7 = White
8 = Aboriginal / First Nations
9 = Other
10 = Unknown]]></comment>
			</column>
			<column name="patient_pregnant" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[True if the patient was pregnant at the time of COVID testing.]]></comment>
			</column>
			<column name="patient_postal_district" type="char" length="3" decimal="0" jt="1" >
				<comment><![CDATA[First 3 letters of postal code of the patient (e.g. H3V).]]></comment>
			</column>
			<column name="patient_assisted_living" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[True if the patient lives in an assisted living facility (semi-autonomous residence or long-term care facility).]]></comment>
			</column>
			<column name="patient_code_status" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Level of intervention, where:
1 = full code
2 = intubation, but no code
3 = medical therapy only
4 = comfort care only]]></comment>
			</column>
			<column name="patient_death" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[True if the patient has died.]]></comment>
			</column>
			<column name="patient_death_cause" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[ICD code representing the cause of death.]]></comment>
			</column>
			<column name="patient_last_fu_date" type="date" length="0" decimal="0" jt="91" >
				<comment><![CDATA[Date of last follow-up at which the mortality status of the patient was assessed.]]></comment>
			</column>
			<index name="pk_patient_data_patient_id" unique="PRIMARY_KEY" >
				<column name="patient_uid" />
			</index>
		</table>
		<table name="pcr_data" >
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="pcr_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="pcr_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Name of the PCR test being performed (e.g. "SaRS-CoV-2 PCR").]]></comment>
			</column>
			<column name="pcr_status" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Current status of the culture:
1 = Resulted
2 = Pending
3 = Rejected
4 = Cancelled
5 = Other]]></comment>
			</column>
			<column name="pcr_loinc_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[LOINC code identifying the test kit used for PCR testing. If a non-commercial kit was used, the appropriate code is 94500-6.

Reference: https://bit.ly/2wQJfly]]></comment>
			</column>
			<column name="pcr_sample_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the sample was drawn.]]></comment>
			</column>
			<column name="pcr_sample_site" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Type of sample collected.
1 = Nasopharyngeal swab
2 = Oropharyngeal swab
3 = Combined NP + OP swab
4 = Expectorated sputum
5 = Bronchial aspirate
6 = Bronchoalveolar lavage
7 = Feces/rectal swab
8 = Urine specimen
9 = Blood specimen
10 = Unknown/unspecified]]></comment>
			</column>
			<column name="pcr_result_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating the time at which the PCR test was resulted.]]></comment>
			</column>
			<column name="pcr_result_positive" type="boolean" length="0" decimal="0" jt="-7" >
				<comment><![CDATA[True if the result from the PCR test was positive.]]></comment>
			</column>
			<index name="pk_pcr_data_id" unique="PRIMARY_KEY" >
				<column name="pcr_data_id" />
			</index>
			<fk name="fk_pcr_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="signal_data" >
			<comment><![CDATA[Raw signal data (e.g. EKG, pulse oximeter, arterial line)]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="signal_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="signal_type" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Type of signal being recorded.
1 = arterial blood pressure
2 = pulmonary artery pressure
3 = pulse oximetry
4 = ventilator pressure
5 = ventilator volume
6 = waveform capnography
7 = electrocardiogram]]></comment>
			</column>
			<column name="signal_num_channels" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[The number of channels in the signal being recorded.]]></comment>
			</column>
			<column name="signal_sampling_freq" type="smallint" length="0" decimal="0" jt="5" >
				<comment><![CDATA[Sampling frequency, in hertz.]]></comment>
			</column>
			<column name="signal_data_uri" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Unique resource identifier pointing to the file on disk where the signal is stored.]]></comment>
			</column>
			<column name="signal_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating when the signal recording started.]]></comment>
			</column>
			<column name="signal_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating when the signal recording ended.]]></comment>
			</column>
			<index name="pk_signal_data_id" unique="PRIMARY_KEY" >
				<column name="signal_data_id" />
			</index>
			<fk name="fk_signal_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="slice_data" >
			<comment><![CDATA[Diagnostic imaging data in DICOM format (X-ray, CT, ultrasound).]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="imaging_data_id" type="integer" length="0" decimal="0" jt="4" >
				<comment><![CDATA[Identifier that references the imaging study to which this slice belongs.]]></comment>
			</column>
			<column name="slice_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="slice_series_id" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[As defined by the DICOM SeriesInstanceUID header (0020,000E).]]></comment>
			</column>
			<column name="slice_data_uri" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Unique resource identifier pointing to the binary object representing the pixel data.]]></comment>
			</column>
			<column name="slice_view_position" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[As defined by the DICOM ViewPosition header (DICOM standard, C.8.1.1)

Should be in: { AP, PA, LL, RL, RLD, LLD, RLO, LLO }]]></comment>
			</column>
			<column name="slice_patient_position" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[As defined by the DICOM PatientPosition header (DICOM standard C.7.3.1).

Should be in: { HFP, HFS, HFDR, HFDL, FFDR, FFDL, FFP, FFS, LFP, LFS, RFP, RFS, AFDR, AFDL, PFDR, PFDL }]]></comment>
			</column>
			<column name="slice_image_orientation" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Specifies the direction cosines of the first row and the first column with respect to the patient, as defined by the DICOM ImageOrientation header (DICOM standard C.7.6.2).

Should be: a string containing a comma-separated list of 6 floating point numbers.]]></comment>
			</column>
			<column name="slice_image_position" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Specifies the X, Y, and Z coordinates of the upper left hand corner of the image, as defined by the DICOM ImagePosition header (DICOM standard C.7.6.2)

Should be: a string containing a comma-separated list of 3 floating point numbers.]]></comment>
			</column>
			<column name="slice_window_center" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[As defined by the DICOM WindowCenter header.]]></comment>
			</column>
			<column name="slice_window_width" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[As defined by the DICOM WindowWidth header.]]></comment>
			</column>
			<column name="slice_pixel_spacing" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[For CT scans only. As defined in the PixelSpacing DICOM header.]]></comment>
			</column>
			<column name="slice_thickness" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[For CT scans only. As defined in the PixelSpacing DICOM header.]]></comment>
			</column>
			<index name="pk_dicom_data_id" unique="PRIMARY_KEY" >
				<column name="slice_data_id" />
			</index>
			<fk name="fk_slice_data_imaging_data" to_schema="covidb" to_table="imaging_data" >
				<fk_column name="imaging_data_id" pk="imaging_data_id" />
			</fk>
			<fk name="fk_slice_data_culture_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
		<table name="symptom_data" >
			<comment><![CDATA[Data for symptoms experienced by the patient.]]></comment>
			<column name="patient_uid" type="char" length="128" decimal="0" jt="1" mandatory="y" >
				<comment><![CDATA[Identifier referencing a specific individual in the patient_data table.]]></comment>
			</column>
			<column name="symptom_data_id" type="bigint" decimal="0" jt="-5" mandatory="y" >
				<comment><![CDATA[Primary key of this table; implemented as an auto-incrementing integer.]]></comment>
			</column>
			<column name="symptom_snomed_code" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[SNOMED CT code representing the symptom.]]></comment>
			</column>
			<column name="symptom_name" type="varchar" length="100" decimal="0" jt="12" >
				<comment><![CDATA[Name of the symptom experienced.]]></comment>
			</column>
			<column name="symptom_details" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Free text containing any additional details about symptoms experienced.]]></comment>
			</column>
			<column name="symptom_source" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Data source that was used to collect information on this symptom.]]></comment>
			</column>
			<column name="symptom_start_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating time at which the symptoms started.]]></comment>
			</column>
			<column name="symptom_end_time" type="varchar" decimal="0" jt="12" >
				<comment><![CDATA[Timestamp, with timezone, indicating time at which the symptoms ended.]]></comment>
			</column>
			<index name="pk_symptom_data_symptom_data_id" unique="PRIMARY_KEY" >
				<column name="symptom_data_id" />
			</index>
			<fk name="fk_symptom_data_patient_data" to_schema="covidb" to_table="patient_data" >
				<fk_column name="patient_uid" pk="patient_uid" />
			</fk>
		</table>
	</schema>
	<connector name="PostgreSQL" database="PostgreSQL" driver_class="org.postgresql.Driver" driver_jar="postgresql-42.2.8.jar" driver_desc="Standard" host="localhost" port="5432" instance="postgres" user="postgres" />
	<layout name="CoviDB Data Spec" id="Layout_143a5b5" hide_fks="fk_culture_data_patient_data,fk_diagnosis_data_patient_data,fk_drug_data_patient_data,fk_episode_data_patient_data,fk_exposure_data_patient_data,fk_imaging_data_patient_data,fk_intervention_data_patient_data,fk_intervention_data_drug_data,fk_lab_data_patient_data,fk_observation_data_patient_data,fk_pcr_data_patient_data,fk_signal_data_patient_data,fk_slice_data_culture_data,fk_symptom_data_patient_data," show_relation="columns" >
		<comment><![CDATA[CoviDB - Pre-Release Data Specification]]></comment>
		<entity schema="covidb" name="culture_data" color="C1D8EE" x="352" y="80" />
		<entity schema="covidb" name="diagnosis_data" color="C1D8EE" x="64" y="480" />
		<entity schema="covidb" name="drug_data" color="C1D8EE" x="560" y="608" />
		<entity schema="covidb" name="episode_data" color="C1D8EE" x="352" y="640" />
		<entity schema="covidb" name="exposure_data" color="C1D8EE" x="64" y="912" />
		<entity schema="covidb" name="exposure_type" color="C1D8EE" x="336" y="960" />
		<entity schema="covidb" name="imaging_data" color="C1D8EE" x="752" y="80" />
		<entity schema="covidb" name="intervention_data" color="C1D8EE" x="752" y="640" />
		<entity schema="covidb" name="intervention_type" color="C1D8EE" x="736" y="960" />
		<entity schema="covidb" name="lab_data" color="C1D8EE" x="352" y="320" />
		<entity schema="covidb" name="observation_data" color="C1D8EE" x="752" y="320" />
		<entity schema="covidb" name="observation_type" color="C1D8EE" x="1072" y="368" />
		<entity schema="covidb" name="patient_data" color="C1D8EE" x="48" y="80" />
		<entity schema="covidb" name="pcr_data" color="C1D8EE" x="560" y="80" />
		<entity schema="covidb" name="signal_data" color="C1D8EE" x="560" y="320" />
		<entity schema="covidb" name="slice_data" color="C1D8EE" x="1072" y="80" />
		<entity schema="covidb" name="symptom_data" color="C1D8EE" x="64" y="688" />
		<group name="Measurements" color="C4E0F9" >
			<entity schema="covidb" name="culture_data" />
			<entity schema="covidb" name="imaging_data" />
			<entity schema="covidb" name="lab_data" />
			<entity schema="covidb" name="pcr_data" />
			<entity schema="covidb" name="signal_data" />
			<entity schema="covidb" name="observation_data" />
		</group>
		<group name="Care" color="C4E0F9" >
			<entity schema="covidb" name="episode_data" />
			<entity schema="covidb" name="drug_data" />
			<entity schema="covidb" name="intervention_data" />
		</group>
		<group name="DICOM slices" color="C4E0F9" >
			<entity schema="covidb" name="slice_data" />
		</group>
		<group name="Epidemiological" color="C4E0F9" >
			<entity schema="covidb" name="diagnosis_data" />
			<entity schema="covidb" name="exposure_data" />
			<entity schema="covidb" name="symptom_data" />
		</group>
		<group name="Demographics" color="C4E0F9" >
			<entity schema="covidb" name="patient_data" />
		</group>
		<script name="SQL_Editor" id="Editor_5adec0b" language="SQL" >
			<string><![CDATA[DROP  TABLE "public".patient_data]]></string>
		</script>
		<script name="SQL_Editor_001" id="Editor_55ad819" language="SQL" >
			<string><![CDATA[CREATE  TABLE "public".exposure_data ( 
	id                   integer  NOT NULL ,
	CONSTRAINT pk_exposure_data_id PRIMARY KEY ( id )
 );

CREATE  TABLE "public".patient_data ( 
	patient_id           char(128)  NOT NULL ,
	local_patient_id     char(128)  NOT NULL ,
	site_code            integer   ,
	covid_status         smallint   ,
	birth_date           date   ,
	birth_sex            bool   ,
	height               float8   ,
	weight               float8   ,
	postal_district      char(3)   ,
	is_pregnant          bool   ,
	ethnicity            date   ,
	code_status          smallint   ,
	alcohol_active       smallint   ,
	smoking_active       smallint   ,
	vaping_active        smallint   ,
	smoking_pack_years   smallint   ,
	CONSTRAINT pk_patient_data_patient_id PRIMARY KEY ( patient_id )
 );

COMMENT ON TABLE "public".patient_data IS 'Table for temporally invariant patient characteristics.';]]></string>
		</script>
		<script name="SQL_Editor_002" id="Editor_23d8e98" language="SQL" >
			<string><![CDATA[CREATE  TABLE "public".culture_data ( 
	culture_id           integer  NOT NULL ,
	patient_uid          char(64)   ,
	sample_site          smallint   ,
	sample_time          timestamptz   ,
	result_time          timestamptz   ,
	culture_positive     bool   ,
	culture_organisms    bool   ,
	CONSTRAINT pk_culture_data_id PRIMARY KEY ( culture_id )
 );

COMMENT ON COLUMN "public".culture_data.sample_site IS 'Site from which the culture sample was collected.\n1 = Expectorated sputum\n2 = Endotracheal aspirate\n3 = Bronchoalveolar lavage\n4 = Pleural fluid\n5 = Ascites fluid\n6 = Blood culture\n7 = Urine culture\n8 = CSF culture';

COMMENT ON COLUMN "public".culture_data.sample_time IS 'Timestamp, with time zone, of sampling.';

COMMENT ON COLUMN "public".culture_data.result_time IS 'Timestamp, with time zone, indicating the time at which the culture was resulted.';

COMMENT ON COLUMN "public".culture_data.culture_positive IS 'Equals true if the culture yielded growth of a pathogen in significant quantities (e.g. any quantity for blood, > 10^3 CFUs for LBA sputum)';

COMMENT ON COLUMN "public".culture_data.culture_organisms IS 'Comma-separated list of organisms that have grown on the culture medium. Organisms should be stated with their full name (e.g. Staphylococcus aureus).';

CREATE  TABLE "public".frailty_data ( 
	id                   integer  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	CONSTRAINT pk_frailty_data_id PRIMARY KEY ( id )
 );

CREATE  TABLE "public".imaging_data ( 
	imaging_id           serial  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	imaging_type         timestamptz   ,
	equipment_manufacturer varchar   ,
	acquisition_time     timestamptz   ,
	report_time          timestamptz   ,
	report_text          varchar(250)   ,
	CONSTRAINT pk_study_data_id PRIMARY KEY ( imaging_id )
 );

COMMENT ON COLUMN "public".imaging_data.imaging_type IS 'Modality of the imaging that was performed, as defined by the DICOM "Modality" header (DICOM standard section C.7.3.1).\n\nExamples: CT, XR, US.\n\nReference: https://bit.ly/2X8Yv7Q';

COMMENT ON COLUMN "public".imaging_data.equipment_manufacturer IS 'Manufacturer of the equipment that was used to acquire imaging, as defined by the DICOM "Manufacturer header."';

COMMENT ON COLUMN "public".imaging_data.acquisition_time IS 'Timestamp, with timezone, representing the time at which the study was performed.';

COMMENT ON COLUMN "public".imaging_data.report_time IS 'Timestamp, with timezone, indicating the time at which the imaging was reported.';

COMMENT ON COLUMN "public".imaging_data.report_text IS 'De-identified textual report of the imaging.';

CREATE  TABLE "public".intervention_data ( 
	intervention_id      serial  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	CONSTRAINT pk_intervention_data_id PRIMARY KEY ( intervention_id )
 );

CREATE  TABLE "public".lab_data ( 
	lab_id               integer  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	lab_name             varchar(100)   ,
	lab_code             varchar   ,
	lab_units            varchar   ,
	sample_time          timestamptz   ,
	sample_site          smallint   ,
	result_time          timestamptz   ,
	CONSTRAINT pk_lab_data_id PRIMARY KEY ( lab_id )
 );

COMMENT ON TABLE "public".lab_data IS 'Contains data related to laboratory tests.';

COMMENT ON COLUMN "public".lab_data.lab_name IS 'Name of laboratory test. \n\nReference: https://bit.ly/2UGF5pp';

COMMENT ON COLUMN "public".lab_data.lab_code IS 'Code for laboratory test.\n\nReference (for CERNER): https://bit.ly/2UGF5pp';

COMMENT ON COLUMN "public".lab_data.lab_units IS 'Reporting units for the lab test.';

COMMENT ON COLUMN "public".lab_data.sample_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was sampled.';

COMMENT ON COLUMN "public".lab_data.sample_site IS 'For blood samples only: type of blood sample.\n1 = Venous blood\n2 = Arterial blood\n3 = Capillary blood\n4 = Blood (unspecified)';

COMMENT ON COLUMN "public".lab_data.result_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was resulted.';

CREATE  TABLE "public".observation_data ( 
	observation_id       serial  NOT NULL ,
	CONSTRAINT pk_clinical_data_id PRIMARY KEY ( observation_id )
 );

CREATE  TABLE "public".outcome_data ( 
	outcome_id           serial  NOT NULL ,
	patient_uid          char(128)   ,
	CONSTRAINT pk_outcome_data_id PRIMARY KEY ( outcome_id )
 );

CREATE  TABLE "public".patient_data ( 
	patient_uid          char(128)  NOT NULL ,
	site_patient_uid     char(128)  NOT NULL ,
	site_code            varchar   ,
	covid_status         smallint   ,
	birth_date           date   ,
	female_sex           bool   ,
	postal_district      char(3)   ,
	active_pregnancy     bool   ,
	code_status          smallint   ,
	active_etoh          smallint   ,
	active_smoking       smallint   ,
	active_vaping        smallint   ,
	smoking_pack_years   smallint   ,
	ethnicity            smallint   ,
	CONSTRAINT pk_patient_data_patient_id PRIMARY KEY ( patient_uid )
 );

COMMENT ON TABLE "public".patient_data IS 'Table for temporally invariant patient characteristics.';

COMMENT ON COLUMN "public".patient_data.patient_uid IS 'Globally unique identifier for a patient with a given RAMQ number. Generated deterministically from RAMQ number via PBKDF2. Not traceable back to patient.\n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.site_patient_uid IS 'Per-site unique identifier for a patient with a given unit number. Generated deterministically from RAMQ number via PBKDF2. Not traceable back to patient.\n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.site_code IS 'Standardized code for the site at which the data was acquired.\n\nReference codes: https://bit.ly/2Jyw7nN';

COMMENT ON COLUMN "public".patient_data.covid_status IS 'COVID status of the patient.\n1 = Positive at current site\n2 = Negative at current site\n3 = Positive at other site (transferred + patient)\n4 = Negative at other site (transferred - patient)\n5 = Test result pending\n6 = Not tested for COVID';

COMMENT ON COLUMN "public".patient_data.birth_date IS 'Birth date of the patient.';

COMMENT ON COLUMN "public".patient_data.female_sex IS 'Equals 1 if the patient''s sex at birth is female.';

COMMENT ON COLUMN "public".patient_data.postal_district IS 'First 3 letters of postal code of the patient (e.g. H3V).';

COMMENT ON COLUMN "public".patient_data.active_pregnancy IS 'True if the was pregnant at the time of COVID testing.';

COMMENT ON COLUMN "public".patient_data.ethnicity IS 'Ethnicity of the patient, as defined by WHO CRF.\n1 = Arab\n2 = Black\n3 = East Asian\n4 = South Asian\n5 = West Asian\n6 = Latin American\n7 = White\n8 = Aboriginal / First Nations\n9 = Other\n10 = Unknown';

CREATE  TABLE "public".pcr_data ( 
	pcr_id               serial  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	pcr_name             varchar(100)   ,
	pcr_loinc            timestamptz   ,
	sample_time          timestamptz   ,
	result_time          timestamptz   ,
	pcr_positive         bool   ,
	CONSTRAINT pk_pcr_data_id PRIMARY KEY ( pcr_id )
 );

COMMENT ON COLUMN "public".pcr_data.pcr_name IS 'Name of the PCR test being performed (e.g. "SaRS-CoV-2 PCR").';

COMMENT ON COLUMN "public".pcr_data.pcr_loinc IS 'LOINC code identifying the test kit used for PCR testing. If a non-commercial kit was used, the appropriate code is 94500-6.\n\nReference: https://bit.ly/2wQJfly';

COMMENT ON COLUMN "public".pcr_data.sample_time IS 'Timestamp, with timezone, indicating the time at which the sample was drawn.';

COMMENT ON COLUMN "public".pcr_data.result_time IS 'Timestamp, with timezone, indicating the time at which the PCR test was resulted.';

COMMENT ON COLUMN "public".pcr_data.pcr_positive IS 'True if the result from the PCR test was positive.';

CREATE  TABLE "public".prescription_data ( 
	prescription_id      serial  NOT NULL ,
	patient_uid          char(128)   ,
	drug_name            varchar(100)   ,
	drug_din             varchar   ,
	drug_infusion        bool   ,
	drug_dose            varchar   ,
	drug_rate            float8   ,
	drug_roa             varchar   ,
	drug_frequency       smallint   ,
	start_time           timestamptz   ,
	end_time             timestamptz   ,
	CONSTRAINT pk_drug_data_id PRIMARY KEY ( prescription_id )
 );

COMMENT ON COLUMN "public".prescription_data.drug_name IS 'Generic name of drug that was administered.';

COMMENT ON COLUMN "public".prescription_data.drug_din IS 'Standard Drug Identification Number (DIN).\n\nReference: https://bit.ly/2R8jPGC';

COMMENT ON COLUMN "public".prescription_data.drug_infusion IS 'True if the drug is administered via a continuous infusion.';

COMMENT ON COLUMN "public".prescription_data.drug_dose IS 'Dose of the drug administered at a time.';

COMMENT ON COLUMN "public".prescription_data.drug_rate IS 'Drug infusion rate, for continuous infusions.';

COMMENT ON COLUMN "public".prescription_data.drug_roa IS 'Drug route of administration short name, as defined by FDA standards (e.g. IV, SC, PO). \n\nReference: https://bit.ly/3dRlo5z';

COMMENT ON COLUMN "public".prescription_data.drug_frequency IS '(If drug_infusion is FALSE). Frequency of drug administration, in number of times per day.';

COMMENT ON COLUMN "public".prescription_data.start_time IS 'Timezone, with timestamp, indicating the time at which the drug was started.';

COMMENT ON COLUMN "public".prescription_data.end_time IS 'Timezone, with timestamp, indicating the time at which the drug was stopped.';

CREATE  TABLE "public".resp_data ( 
	resp_data_id         serial  NOT NULL ,
	patient_uid          char(128)   ,
	CONSTRAINT pk_respiratory_data_id PRIMARY KEY ( resp_data_id )
 );

CREATE  TABLE "public".signal_data ( 
	signal_id            serial  NOT NULL ,
	CONSTRAINT pk_signal_data_id PRIMARY KEY ( signal_id )
 );

CREATE  TABLE "public".slice_data ( 
	slice_id             serial  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	series_id            varchar   ,
	imaging_id           integer   ,
	pixel_data_uri       varchar   ,
	view_position        varchar   ,
	patient_position     varchar   ,
	image_orientation    varchar   ,
	image_position       varchar   ,
	window_center        varchar   ,
	window_width         varchar   ,
	pixel_spacing        varchar   ,
	slice_thickness      varchar   ,
	CONSTRAINT pk_dicom_data_id PRIMARY KEY ( slice_id )
 );

COMMENT ON COLUMN "public".slice_data.series_id IS 'As defined by the DICOM SeriesInstanceUID header (0020,000E).';

COMMENT ON COLUMN "public".slice_data.imaging_id IS 'Identifier that references the imaging study to which this slice belongs.';

COMMENT ON COLUMN "public".slice_data.pixel_data_uri IS 'Unique resource identifier pointing to the binary object representing the pixel data.';

COMMENT ON COLUMN "public".slice_data.view_position IS 'As defined by the DICOM ViewPosition header (DICOM standard, C.8.1.1)';

COMMENT ON COLUMN "public".slice_data.patient_position IS 'As defined by the DICOM PatientPosition header (DICOM standard C.7.3.1).';

COMMENT ON COLUMN "public".slice_data.image_orientation IS 'Specifies the direction cosines of the first row and the first column with respect to the patient, as defined by the DICOM ImageOrientation header (DICOM standard C.7.6.2).';

COMMENT ON COLUMN "public".slice_data.image_position IS 'Specifies the X, Y, and Z coordinates of the upper left hand corner of the image, as defined by the DICOM ImagePosition header (DICOM standard C.7.6.2)';

COMMENT ON COLUMN "public".slice_data.window_center IS 'As defined by the DICOM WindowCenter header.';

COMMENT ON COLUMN "public".slice_data.window_width IS 'As defined by the DICOM WindowWidth header.';

COMMENT ON COLUMN "public".slice_data.pixel_spacing IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

COMMENT ON COLUMN "public".slice_data.slice_thickness IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

CREATE  TABLE "public".episode_data ( 
	episode_id           serial  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	unit_type            smallint   ,
	primary_diagnoses_icd varchar   ,
	secondary_diagnoses_icd varchar   ,
	CONSTRAINT pk_episode_data_id PRIMARY KEY ( episode_id )
 );

COMMENT ON COLUMN "public".episode_data.unit_type IS 'Type of unit:\n1 = Outpatient clinic\n2 = Emergency room\n3 = Hospital ward\n4 = High-dependency unit\n5 = Intensive care unit';

COMMENT ON COLUMN "public".episode_data.primary_diagnoses_icd IS 'The ICD-10 codes representing primary diagnosis (BDCP type M) that was made during the care episode.\n\nReference: Canadian Norms for Codification of Medical Diagnoses, https://bit.ly/346yCHg';

COMMENT ON COLUMN "public".episode_data.secondary_diagnoses_icd IS 'A comma-separated list of ICD-10 codes representing secondary diagnoses (BDCP type 3) that were made during the care episode.\n\nReference: Canadian Norms for Codification of Medical Diagnoses, https://bit.ly/346yCHg';

CREATE  TABLE "public".exposure_data ( 
	exposure_id          integer  NOT NULL ,
	patient_uid          char(128)  NOT NULL ,
	exposure_type        smallint   ,
	exposure_details     varchar   ,
	exposure_time        timestamptz   ,
	CONSTRAINT pk_exposure_data_id PRIMARY KEY ( exposure_id )
 );

COMMENT ON COLUMN "public".exposure_data.patient_uid IS 'Globally unique patient identifier.';

COMMENT ON COLUMN "public".exposure_data.exposure_type IS 'Exposure types:\n1 = travel (travel to an area outside of Canada with documented cases of nCoV infection)\n2 = contact (close contact with a confirmed or probable symptomatic case of COVID-19)\n3 = healthcare (present in a healthcare facility where COVID-19 was managed)\n4 = laboratory exposure (present in a laboratory facility handling samples from patients with COVID-19)\n\nN.B. exposures have been harmonised with WHO CRF, page 2.\n5 = animal exposure (direct contact with animals in countries where the nCoV is known to be circulating in animal populations)\n6 = other';

COMMENT ON COLUMN "public".exposure_data.exposure_details IS 'Free text with additional details on exposure.';

COMMENT ON COLUMN "public".exposure_data.exposure_time IS 'Timestamp with time zone indicating when the exposure occurred.';

ALTER TABLE "public".episode_data ADD CONSTRAINT fk_episode_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".exposure_data ADD CONSTRAINT fk_exposure_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".prescription_data ADD CONSTRAINT fk_prescription_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".slice_data ADD CONSTRAINT fk_slice_data_imaging_data FOREIGN KEY ( imaging_id ) REFERENCES "public".imaging_data( imaging_id );]]></string>
		</script>
		<script name="SQL_Editor_003" id="Editor_44c4ab6" language="SQL" >
			<string><![CDATA[CREATE  TABLE "public".exposure_type ( 
	exposure_type_id     serial  NOT NULL ,
	exposure_type_name   varchar(100)   ,
	exposure_type_description varchar   ,
	exposure_type_total_units varchar   ,
	CONSTRAINT pk_exposure_type_exposure_type_id PRIMARY KEY ( exposure_type_id )
 );

COMMENT ON COLUMN "public".exposure_type.exposure_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_name IS 'Name of exposure type.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_description IS 'Description of exposure.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_total_units IS 'Units determining how the exposure is cumulated (e.g. pack-years for smoking).';

CREATE  TABLE "public".observation_type ( 
	observation_type_id  serial  NOT NULL ,
	observation_category smallint   ,
	observation_name     varchar  NOT NULL ,
	observation_units    varchar  NOT NULL ,
	observation_regexp   varchar   ,
	CONSTRAINT pk_observation_types_observation_id PRIMARY KEY ( observation_type_id )
 );

COMMENT ON COLUMN "public".observation_type.observation_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".observation_type.observation_category IS 'Values:\n1 = Observation from clinical interaction only (e.g. capillary refill)\n2 = Observation derived from a score or rule (e.g. AVPU scale)\n3 = Observation from a measurement device (e.g. blood pressure)\n4 = Observation derived from a setting on a device (e.g. PEEP)';

COMMENT ON COLUMN "public".observation_type.observation_name IS 'Name of observation (e.g. temperature, heart rate).';

COMMENT ON COLUMN "public".observation_type.observation_units IS 'Units for this type of observation.';

COMMENT ON COLUMN "public".observation_type.observation_regexp IS 'Regular expression used to validate observations.';

CREATE  TABLE "public".patient_data ( 
	patient_uid          char(128)  NOT NULL ,
	patient_site_uid     char(128)  NOT NULL ,
	patient_site_code    varchar   ,
	patient_transfer_site_code date   ,
	patient_covid_status smallint   ,
	patient_birth_date   date   ,
	patient_birth_sex    char(1)   ,
	patient_birth_country char(2)   ,
	patient_ethnicity    smallint   ,
	patient_pregnant     bool   ,
	patient_postal_district char(3)   ,
	patient_assisted_living smallint   ,
	patient_code_status  smallint   ,
	patient_death        bool   ,
	patient_death_cause  varchar   ,
	patient_last_fu_date date   ,
	CONSTRAINT pk_patient_data_patient_id PRIMARY KEY ( patient_uid )
 );

COMMENT ON TABLE "public".patient_data IS 'Table for temporally invariant patient characteristics.';

COMMENT ON COLUMN "public".patient_data.patient_uid IS 'Primary key of this table. Globally unique identifier for a patient with a given RAMQ number. Generated deterministically from RAMQ number via PBKDF2. Not traceable back to patient; follows NIST best practices for cryptographically secure storage of password keys.\n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.patient_site_uid IS 'Per-site unique identifier, generated deterministically from unique local site ID via PBKDF2. \n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.patient_site_code IS 'Standardized code for the site at which the data was acquired.\n\nReference codes: https://bit.ly/2Jyw7nN';

COMMENT ON COLUMN "public".patient_data.patient_transfer_site_code IS 'Site code of the transferring institution, if the patient has been transferred from elsewhere.';

COMMENT ON COLUMN "public".patient_data.patient_covid_status IS 'COVID status of the patient.\n1 = Positive at current site\n2 = Negative at current site\n3 = Positive at other site (transferred + patient)\n4 = Negative at other site (transferred - patient)\n5 = Test result pending\n6 = Not tested for COVID';

COMMENT ON COLUMN "public".patient_data.patient_birth_date IS 'Birth date of the patient. Should be replaced by patient_age, computed as per the most recent birth date, in de-identified data exports.';

COMMENT ON COLUMN "public".patient_data.patient_birth_sex IS 'Equals "F" if the patient''s sex at birth is female, "M" if the patient''s sex at birth is male.';

COMMENT ON COLUMN "public".patient_data.patient_birth_country IS 'Country of origin, as 2-letter ISO 3166 code (e.g. CA).';

COMMENT ON COLUMN "public".patient_data.patient_ethnicity IS 'Ethnicity of the patient, as defined by WHO CRF.\n1 = Arab\n2 = Black\n3 = East Asian\n4 = South Asian\n5 = West Asian\n6 = Latin American\n7 = White\n8 = Aboriginal / First Nations\n9 = Other\n10 = Unknown';

COMMENT ON COLUMN "public".patient_data.patient_pregnant IS 'True if the was pregnant at the time of COVID testing.';

COMMENT ON COLUMN "public".patient_data.patient_postal_district IS 'First 3 letters of postal code of the patient (e.g. H3V).';

COMMENT ON COLUMN "public".patient_data.patient_assisted_living IS 'True if the patient lives in an assisted living facility (semi-autonomous residence or long-term care facility).';

COMMENT ON COLUMN "public".patient_data.patient_code_status IS 'Level of intervention, where:\n1 = full code\n2 = intubation, but no code\n3 = medical therapy only\n4 = comfort care only';

COMMENT ON COLUMN "public".patient_data.patient_death IS 'Equals 1 if the patient has died.';

COMMENT ON COLUMN "public".patient_data.patient_death_cause IS 'ICD code representing the cause of death.';

COMMENT ON COLUMN "public".patient_data.patient_last_fu_date IS 'Date of last follow-up at which the mortality status of the patient was assessed.';

CREATE  TABLE "public".pcr_data ( 
	patient_uid          char(128)  NOT NULL ,
	pcr_data_id          serial  NOT NULL ,
	pcr_name             varchar(100)   ,
	pcr_loinc_code       timestamptz   ,
	pcr_sample_time      timestamptz   ,
	pcr_sample_site      smallint   ,
	pcr_sample_rejected  bool   ,
	pcr_result_time      timestamptz   ,
	pcr_result_positive  bool   ,
	CONSTRAINT pk_pcr_data_id PRIMARY KEY ( pcr_data_id )
 );

COMMENT ON COLUMN "public".pcr_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".pcr_data.pcr_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".pcr_data.pcr_name IS 'Name of the PCR test being performed (e.g. "SaRS-CoV-2 PCR").';

COMMENT ON COLUMN "public".pcr_data.pcr_loinc_code IS 'LOINC code identifying the test kit used for PCR testing. If a non-commercial kit was used, the appropriate code is 94500-6.\n\nReference: https://bit.ly/2wQJfly';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_time IS 'Timestamp, with timezone, indicating the time at which the sample was drawn.';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_site IS 'Type of sample collected.\n1 = Nasopharyngeal swab\n2 = Oropharyngeal swab\n3 = Combined NP + OP swab\n4 = Expectorated sputum\n5 = Bronchial aspirate\n6 = Bronchoalveolar lavage\n7 = Feces/rectal swab\n8 = Urine specimen';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".pcr_data.pcr_result_time IS 'Timestamp, with timezone, indicating the time at which the PCR test was resulted.';

COMMENT ON COLUMN "public".pcr_data.pcr_result_positive IS 'True if the result from the PCR test was positive.';

CREATE  TABLE "public".signal_data ( 
	patient_uid          char(128)  NOT NULL ,
	signal_data_id       serial  NOT NULL ,
	signal_type          smallint   ,
	signal_num_channels  smallint   ,
	signal_sampling_freq smallint   ,
	signal_data_uri      varchar   ,
	signal_start_time    timestamptz   ,
	signal_end_time      timestamptz   ,
	CONSTRAINT pk_signal_data_id PRIMARY KEY ( signal_data_id )
 );

COMMENT ON TABLE "public".signal_data IS 'Raw signal data (e.g. EKG, pulse oximeter, arterial line)';

COMMENT ON COLUMN "public".signal_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".signal_data.signal_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".signal_data.signal_type IS 'Type of signal being recorded.\n1 = arterial blood pressure\n2 = pulmonary artery pressure\n3 = pulse oximetry\n4 = ventilator pressure\n5 = ventilator volume\n6 = waveform capnography\n7 = electrocardiogram';

COMMENT ON COLUMN "public".signal_data.signal_num_channels IS 'The number of channels in the signal being recorded.';

COMMENT ON COLUMN "public".signal_data.signal_sampling_freq IS 'Sampling frequency, in hertz.';

COMMENT ON COLUMN "public".signal_data.signal_data_uri IS 'Unique resource identifier pointing to the file on disk where the signal is stored.';

COMMENT ON COLUMN "public".signal_data.signal_start_time IS 'Timestamp, with timezone, indicating when the signal recording started.';

COMMENT ON COLUMN "public".signal_data.signal_end_time IS 'Timestamp, with timezone, indicating when the signal recording ended.';

CREATE  TABLE "public".symptom_data ( 
	patient_uid          char(128)  NOT NULL ,
	symptom_data_id      serial  NOT NULL ,
	symptom_snomed_code  varchar   ,
	symptom_name         varchar(100)   ,
	symptom_details      varchar   ,
	symptom_source       varchar   ,
	symptom_start_time   timestamptz   ,
	symptom_end_time     timestamptz   ,
	CONSTRAINT pk_symptom_data_symptom_data_id PRIMARY KEY ( symptom_data_id )
 );

COMMENT ON TABLE "public".symptom_data IS 'Data for symptoms experienced by the patient.';

COMMENT ON COLUMN "public".symptom_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".symptom_data.symptom_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".symptom_data.symptom_snomed_code IS 'SNOMED CT code representing the symptom.';

COMMENT ON COLUMN "public".symptom_data.symptom_name IS 'Name of the symptom experienced.';

COMMENT ON COLUMN "public".symptom_data.symptom_details IS 'Free text containing any additional details about symptoms experienced.';

COMMENT ON COLUMN "public".symptom_data.symptom_source IS 'Data source that was used to collect information on this symptom.';

COMMENT ON COLUMN "public".symptom_data.symptom_start_time IS 'Timestamp, with timezone, indicating time at which the symptoms started.';

COMMENT ON COLUMN "public".symptom_data.symptom_end_time IS 'Timestamp, with timezone, indicating time at which the symptoms ended.';

CREATE  TABLE "public".culture_data ( 
	patient_uid          char(128)  NOT NULL ,
	culture_data_id      integer  NOT NULL ,
	culture_type         smallint   ,
	culture_loinc_code   varchar   ,
	culture_sample_site  smallint   ,
	culture_sample_time  timestamptz   ,
	culture_sample_rejected bool   ,
	culture_result_time  timestamptz   ,
	culture_gram_positive bool   ,
	culture_growth_positive bool   ,
	culture_result_organisms bool   ,
	CONSTRAINT pk_culture_data_id PRIMARY KEY ( culture_data_id )
 );

COMMENT ON COLUMN "public".culture_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".culture_data.culture_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".culture_data.culture_type IS 'Type of culture obtained.\n1 = Bacterial culture (aerobic)\n2 = Bacterial culture (anaerobic)\n3 = Fungal culture\n4 = Mycobacterial culture';

COMMENT ON COLUMN "public".culture_data.culture_loinc_code IS 'LOINC code of the culture being performed.';

COMMENT ON COLUMN "public".culture_data.culture_sample_site IS 'Site from which the culture sample was collected.\n1 = Expectorated sputum\n2 = Endotracheal aspirate\n3 = Bronchoalveolar lavage\n4 = Pleural fluid\n5 = Ascites fluid\n6 = Blood culture\n7 = Urine culture\n8 = CSF culture\n9 = Other';

COMMENT ON COLUMN "public".culture_data.culture_sample_time IS 'Timestamp, with time zone, of sampling.';

COMMENT ON COLUMN "public".culture_data.culture_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".culture_data.culture_result_time IS 'Timestamp, with time zone, indicating the time at which the culture was resulted.';

COMMENT ON COLUMN "public".culture_data.culture_gram_positive IS 'Equals true if the Gram stain is positive.';

COMMENT ON COLUMN "public".culture_data.culture_growth_positive IS 'Equals true if the culture yielded growth of a pathogen in significant quantities (e.g. any quantity for blood, > 10^3 CFUs for LBA sputum)';

COMMENT ON COLUMN "public".culture_data.culture_result_organisms IS 'Comma-separated list of organisms that have grown on the culture medium. Organisms should be stated with their full name (e.g. Staphylococcus aureus).';

CREATE  TABLE "public".drug_data ( 
	patient_uid          char(128)  NOT NULL ,
	drug_data_id         serial  NOT NULL ,
	drug_name            varchar(100)   ,
	drug_din_code        varchar   ,
	drug_class           varchar   ,
	drug_infusion        bool   ,
	drug_dose            varchar   ,
	drug_rate            float8   ,
	drug_roa             varchar   ,
	drug_frequency       smallint   ,
	drug_start_time      timestamptz   ,
	drug_end_time        timestamptz   ,
	CONSTRAINT pk_drug_data_id PRIMARY KEY ( drug_data_id )
 );

COMMENT ON COLUMN "public".drug_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".drug_data.drug_name IS 'Generic name of drug that was administered.';

COMMENT ON COLUMN "public".drug_data.drug_din_code IS 'Standard Drug Identification Number (DIN).\n\nReference: https://bit.ly/2R8jPGC';

COMMENT ON COLUMN "public".drug_data.drug_class IS 'Standard drug class.';

COMMENT ON COLUMN "public".drug_data.drug_infusion IS 'True if the drug is administered via a continuous infusion.';

COMMENT ON COLUMN "public".drug_data.drug_dose IS 'Dose of the drug administered at a time.';

COMMENT ON COLUMN "public".drug_data.drug_rate IS 'Drug infusion rate, for continuous infusions.';

COMMENT ON COLUMN "public".drug_data.drug_roa IS 'Drug route of administration short name, as defined by FDA standards (e.g. IV, SC, PO). \n\nReference: https://bit.ly/3dRlo5z';

COMMENT ON COLUMN "public".drug_data.drug_frequency IS '(If drug_infusion is FALSE). Frequency of drug administration, in number of times per day.';

COMMENT ON COLUMN "public".drug_data.drug_start_time IS 'Timezone, with timestamp, indicating the time at which the drug was started.';

COMMENT ON COLUMN "public".drug_data.drug_end_time IS 'Timezone, with timestamp, indicating the time at which the drug was stopped.';

CREATE  TABLE "public".episode_data ( 
	patient_uid          char(128)  NOT NULL ,
	episode_data_id      serial  NOT NULL ,
	episode_unit_type    smallint   ,
	episode_ctas         date   ,
	episode_start_time   timestamptz   ,
	episode_end_time     timestamptz   ,
	CONSTRAINT pk_episode_data_id PRIMARY KEY ( episode_data_id )
 );

COMMENT ON TABLE "public".episode_data IS 'Start and end type of patient presence on unit, with accompanying metadata.';

COMMENT ON COLUMN "public".episode_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".episode_data.episode_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".episode_data.episode_unit_type IS 'Type of unit:\n1 = Outpatient clinic\n2 = Emergency room\n3 = Hospital ward\n4 = High-dependency unit\n5 = Intensive care unit';

COMMENT ON COLUMN "public".episode_data.episode_ctas IS 'CTAS (Canadian Triage and Acuity Scale) level for initial presentation in ER.\nLevel 1 = Resuscitation\nLevel 2 = Emergent\nLevel 3 = Urgent\nLevel 4 = Less urgent\nLevel 5 = Non urgent\n\nShould be blank unless episode_unit_type == 2.';

COMMENT ON COLUMN "public".episode_data.episode_start_time IS 'Timestamp, with timezone, of when the episode started (e.g. triaged in the emergency room).';

COMMENT ON COLUMN "public".episode_data.episode_end_time IS 'Timestamp, with timezone, of when the episode ended (e.g. discharged from the emergency room).';

CREATE  TABLE "public".exposure_data ( 
	patient_uid          char(128)  NOT NULL ,
	exposure_data_id     integer  NOT NULL ,
	exposure_type_id     integer   ,
	exposure_total       timestamptz   ,
	exposure_details     varchar   ,
	exposure_start_time  timestamptz   ,
	exposure_end_time    timestamptz   ,
	CONSTRAINT pk_exposure_data_id PRIMARY KEY ( exposure_data_id )
 );

COMMENT ON TABLE "public".exposure_data IS 'Exposure dates and types.';

COMMENT ON COLUMN "public".exposure_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".exposure_data.exposure_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".exposure_data.exposure_type_id IS 'Identifier referencing the type of exposure.';

COMMENT ON COLUMN "public".exposure_data.exposure_total IS 'Cumulative exposure, if quantifiable. E.g. number of pack years smoked.';

COMMENT ON COLUMN "public".exposure_data.exposure_details IS 'Free text with additional details on exposure.';

COMMENT ON COLUMN "public".exposure_data.exposure_start_time IS 'Timestamp, with time zone, indicating when the exposure occurred (for a one-time exposure), or started (for an prolonged exposure).';

COMMENT ON COLUMN "public".exposure_data.exposure_end_time IS 'Timestamp, with time zone, indicating when the exposure ended.';

CREATE  TABLE "public".imaging_data ( 
	patient_uid          char(128)  NOT NULL ,
	imaging_data_id      serial  NOT NULL ,
	imaging_modality     timestamptz   ,
	imaging_iv_contrast  bool   ,
	imaging_manufacturer varchar   ,
	imaging_acquisition_time timestamptz   ,
	imaging_report_time  timestamptz   ,
	imaging_report_text  varchar(250)   ,
	CONSTRAINT pk_study_data_id PRIMARY KEY ( imaging_data_id )
 );

COMMENT ON COLUMN "public".imaging_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".imaging_data.imaging_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".imaging_data.imaging_modality IS 'Modality of the imaging that was performed, as defined by the DICOM "Modality" header (DICOM standard section C.7.3.1).\n\nExamples: CT, XR, US.\n\nReference: https://bit.ly/2X8Yv7Q';

COMMENT ON COLUMN "public".imaging_data.imaging_iv_contrast IS 'True if intravenous contrast was given during the imaging study.';

COMMENT ON COLUMN "public".imaging_data.imaging_manufacturer IS 'Manufacturer of the equipment that was used to acquire imaging, as defined by the DICOM "Manufacturer header."';

COMMENT ON COLUMN "public".imaging_data.imaging_acquisition_time IS 'Timestamp, with timezone, representing the time at which the study was performed.';

COMMENT ON COLUMN "public".imaging_data.imaging_report_time IS 'Timestamp, with timezone, indicating the time at which the imaging was reported.';

COMMENT ON COLUMN "public".imaging_data.imaging_report_text IS 'De-identified textual report of the imaging.';

CREATE  TABLE "public".intervention_data ( 
	patient_uid          char(128)  NOT NULL ,
	drug_data_id         integer   ,
	intervention_data_id serial  NOT NULL ,
	intervention_type_id smallint   ,
	intervention_details varchar(100)   ,
	intervention_start_time timestamptz   ,
	intervention_end_time timestamptz   ,
	CONSTRAINT pk_intervention_data_id PRIMARY KEY ( intervention_data_id ),
	CONSTRAINT unq_intervention_data_intervention_type_id UNIQUE ( intervention_type_id ) 
 );

COMMENT ON COLUMN "public".intervention_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".intervention_data.intervention_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".intervention_data.intervention_type_id IS 'Identifier referencing the type of intervention.';

COMMENT ON COLUMN "public".intervention_data.intervention_start_time IS 'Timestamp, with timezone, indicating the time at which the intervention was initiated.';

COMMENT ON COLUMN "public".intervention_data.intervention_end_time IS 'Timestamp, with timezone, indicating the time at which the intervention was completed.';

CREATE  TABLE "public".intervention_type ( 
	intervention_type_id serial  NOT NULL ,
	intervention_name    varchar   ,
	intervention_invasiveness serial   ,
	CONSTRAINT pk_respiratory_data_id PRIMARY KEY ( intervention_type_id )
 );

COMMENT ON COLUMN "public".intervention_type.intervention_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".intervention_type.intervention_name IS 'Name of intervention. E.g. prone ventilation, inhaled nitric oxide, tracheostomy, extracorporeal support.';

COMMENT ON COLUMN "public".intervention_type.intervention_invasiveness IS 'Level of invasiveness of the intervention type:\n1 = noninvasive intervention (e.g. proning)\n2 = drug administration\n3 = invasive bedside procedure (e.g. central line)\n4 = open surgical procedure (e.g. tracheostomy)';

CREATE  TABLE "public".lab_data ( 
	patient_uid          char(128)  NOT NULL ,
	lab_data_id          serial  NOT NULL ,
	lab_name             varchar(100)   ,
	lab_loinc_code       varchar   ,
	lab_cerner_code      varchar   ,
	lab_units            varchar   ,
	lab_sample_time      timestamptz   ,
	lab_sample_site      smallint   ,
	lab_sample_rejected  bool   ,
	lab_result_time      timestamptz   ,
	lab_result_value     float8   ,
	CONSTRAINT pk_lab_data_lab_data_id PRIMARY KEY ( lab_data_id )
 );

COMMENT ON TABLE "public".lab_data IS 'Contains data related to laboratory tests.';

COMMENT ON COLUMN "public".lab_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".lab_data.lab_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".lab_data.lab_name IS 'Name of laboratory test. \n\nReference: https://bit.ly/2UGF5pp\n\nCould be in: { haemoglobin, WBC count, lymphocyte count, neutrophil count, hematocrit, platelets, APTT, PT, INR, ALT, total bilirubin, AST, glucose, urea, lactate, creatinine, sodium, potassium, procalcitonin, CRP, LDH, D-dimer, fibrinogen, ferritin, triglycerides, IL-6, CD4, CD8, CD4/CD8 ratio, NT-proBNP, troponin, hsT, hsTnI, TnT, TnI }';

COMMENT ON COLUMN "public".lab_data.lab_loinc_code IS 'LOINC code for the laboratory test.';

COMMENT ON COLUMN "public".lab_data.lab_cerner_code IS 'Code for laboratory test.\n\nReference (for CERNER): https://bit.ly/2UGF5pp';

COMMENT ON COLUMN "public".lab_data.lab_units IS 'Reporting units for the lab test.\n\nCould be in: { g/L, g/dL, 10^9 cells/L, 10^3 cells/microL, cells/microL, seconds, U/L, micromol/L, mg/L, mg/dL, mmol/L, mg/dL, mEq/L }';

COMMENT ON COLUMN "public".lab_data.lab_sample_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was sampled.';

COMMENT ON COLUMN "public".lab_data.lab_sample_site IS 'For blood samples only: type of blood sample.\n1 = Venous blood\n2 = Arterial blood\n3 = Capillary blood\n4 = Blood (unspecified)';

COMMENT ON COLUMN "public".lab_data.lab_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".lab_data.lab_result_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was resulted.';

COMMENT ON COLUMN "public".lab_data.lab_result_value IS 'Value of the laboratory result.';

CREATE  TABLE "public".observation_data ( 
	patient_uid          char(128)  NOT NULL ,
	observation_data_id  serial  NOT NULL ,
	observation_type_id  integer  NOT NULL ,
	observation_device   varchar   ,
	observation_start_time timestamptz   ,
	observation_end_time timestamptz   ,
	CONSTRAINT pk_clinical_data_id PRIMARY KEY ( observation_data_id )
 );

COMMENT ON COLUMN "public".observation_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".observation_data.observation_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".observation_data.observation_device IS 'Device that was used to perform the observation (e.g. blood pressure cuff, arterial line).';

COMMENT ON COLUMN "public".observation_data.observation_start_time IS 'Timestamp, with timezone, indicating the time at which the observation started.';

COMMENT ON COLUMN "public".observation_data.observation_end_time IS 'Timestamp, with timezone, indicating the time at which the observation ended. Empty if the observation is made at a single point in time.';

CREATE  TABLE "public".slice_data ( 
	patient_uid          char(128)  NOT NULL ,
	imaging_data_id      integer   ,
	slice_data_id        serial  NOT NULL ,
	slice_series_id      varchar   ,
	slice_data_uri       varchar   ,
	slice_view_position  varchar   ,
	slice_patient_position varchar   ,
	slice_image_orientation varchar   ,
	slice_image_position varchar   ,
	slice_window_center  varchar   ,
	slice_window_width   varchar   ,
	slice_pixel_spacing  varchar   ,
	slice_thickness      varchar   ,
	CONSTRAINT pk_dicom_data_id PRIMARY KEY ( slice_data_id )
 );

COMMENT ON TABLE "public".slice_data IS 'Diagnostic imaging data in DICOM format (X-ray, CT, ultrasound).';

COMMENT ON COLUMN "public".slice_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".slice_data.imaging_data_id IS 'Identifier that references the imaging study to which this slice belongs.';

COMMENT ON COLUMN "public".slice_data.slice_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".slice_data.slice_series_id IS 'As defined by the DICOM SeriesInstanceUID header (0020,000E).';

COMMENT ON COLUMN "public".slice_data.slice_data_uri IS 'Unique resource identifier pointing to the binary object representing the pixel data.';

COMMENT ON COLUMN "public".slice_data.slice_view_position IS 'As defined by the DICOM ViewPosition header (DICOM standard, C.8.1.1)\n\nShould be in: { AP, PA, LL, RL, RLD, LLD, RLO, LLO }';

COMMENT ON COLUMN "public".slice_data.slice_patient_position IS 'As defined by the DICOM PatientPosition header (DICOM standard C.7.3.1).\n\nShould be in: { HFP, HFS, HFDR, HFDL, FFDR, FFDL, FFP, FFS, LFP, LFS, RFP, RFS, AFDR, AFDL, PFDR, PFDL }';

COMMENT ON COLUMN "public".slice_data.slice_image_orientation IS 'Specifies the direction cosines of the first row and the first column with respect to the patient, as defined by the DICOM ImageOrientation header (DICOM standard C.7.6.2).\n\nShould be: a string containing a comma-separated list of 6 floating point numbers.';

COMMENT ON COLUMN "public".slice_data.slice_image_position IS 'Specifies the X, Y, and Z coordinates of the upper left hand corner of the image, as defined by the DICOM ImagePosition header (DICOM standard C.7.6.2)\n\nShould be: a string containing a comma-separated list of 3 floating point numbers.';

COMMENT ON COLUMN "public".slice_data.slice_window_center IS 'As defined by the DICOM WindowCenter header.';

COMMENT ON COLUMN "public".slice_data.slice_window_width IS 'As defined by the DICOM WindowWidth header.';

COMMENT ON COLUMN "public".slice_data.slice_pixel_spacing IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

COMMENT ON COLUMN "public".slice_data.slice_thickness IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

CREATE  TABLE "public".diagnosis_data ( 
	patient_uid          char(128)  NOT NULL ,
	episode_data_id      integer   ,
	diagnosis_id         serial  NOT NULL ,
	diagnosis_type       varchar   ,
	diagnosis_name       varchar(100)   ,
	diagnosis_icd_code   varchar   ,
	diagnosis_source     varchar   ,
	CONSTRAINT pk_outcome_data_id PRIMARY KEY ( diagnosis_id )
 );

COMMENT ON COLUMN "public".diagnosis_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".diagnosis_data.episode_data_id IS 'Identifier referencing episode during which a diagnosis was made.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_type IS 'Type of diagnosis recorded.\n1 = comorbidity prior to admission (BDCP type 1)\n2 = comorbidity after admission (BDCP type 2)\n3 = primary diagnosis (BDCP type M)\n4 = secondary diagnosis (BDCP type 3)\n\nReference: Canadian Norms for Codification of Medical Diagnoses, https://bit.ly/346yCHg';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_name IS 'Name of diagnosis that was recorded.\n\nCould be in: { viral pneumonitis, bacterial pneumonia, acute respiratory distress syndrome, pneumothorax, pleural effusion, cryptogenic organizing pneumonia, bronchiolitis, meningitis, seizure, stroke, congestive heart failure, endocarditis, myocarditis, pericarditis, atrial fibrillation, ventricular tachycardia/ventricular fibrillation, STEMI, NSTEMI, cardiac arrest, bactermia, disseminated intravascular coagulation, anemia, rhabdomyolysis, acute renal injury, acute renal failure, gastrointestinal hemorrhage, pancreatitis, liver dysfunction, hyperglycemia, hypoglycemia, home oxygen therapy, outpatient dialysis }';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_icd_code IS 'ICD-10 code referencing the diagnosis.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_source IS 'Data source from which the diagnosis occurred.';

ALTER TABLE "public".culture_data ADD CONSTRAINT fk_culture_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".diagnosis_data ADD CONSTRAINT fk_outcome_data_episode_data FOREIGN KEY ( episode_data_id ) REFERENCES "public".episode_data( episode_data_id );

ALTER TABLE "public".diagnosis_data ADD CONSTRAINT fk_diagnosis_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".drug_data ADD CONSTRAINT fk_prescription_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".episode_data ADD CONSTRAINT fk_episode_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".exposure_data ADD CONSTRAINT fk_exposure_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".exposure_data ADD CONSTRAINT fk_exposure_data_exposure_type FOREIGN KEY ( exposure_type_id ) REFERENCES "public".exposure_type( exposure_type_id );

ALTER TABLE "public".imaging_data ADD CONSTRAINT fk_imaging_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".intervention_data ADD CONSTRAINT fk_intervention_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".intervention_data ADD CONSTRAINT fk_intervention_data_drug_data FOREIGN KEY ( drug_data_id ) REFERENCES "public".drug_data( drug_data_id );

ALTER TABLE "public".intervention_type ADD CONSTRAINT fk_intervention_type FOREIGN KEY ( intervention_type_id ) REFERENCES "public".intervention_data( intervention_type_id );

ALTER TABLE "public".lab_data ADD CONSTRAINT fk_lab_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".observation_data ADD CONSTRAINT fk_observation_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".observation_data ADD CONSTRAINT fk_observation_type FOREIGN KEY ( observation_type_id ) REFERENCES "public".observation_type( observation_type_id );

ALTER TABLE "public".pcr_data ADD CONSTRAINT fk_pcr_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".signal_data ADD CONSTRAINT fk_signal_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".slice_data ADD CONSTRAINT fk_slice_data_imaging_data FOREIGN KEY ( imaging_data_id ) REFERENCES "public".imaging_data( imaging_data_id );

ALTER TABLE "public".slice_data ADD CONSTRAINT fk_slice_data_culture_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".symptom_data ADD CONSTRAINT fk_symptom_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );]]></string>
		</script>
		<script name="SQL_Editor_004" id="Editor_1494912" language="SQL" >
			<string><![CDATA[CREATE  TABLE "public".exposure_type ( 
	exposure_type_id     serial  NOT NULL ,
	exposure_type_name   varchar(100)   ,
	exposure_type_description varchar   ,
	exposure_type_total_units varchar   ,
	CONSTRAINT pk_exposure_type_exposure_type_id PRIMARY KEY ( exposure_type_id )
 );

COMMENT ON COLUMN "public".exposure_type.exposure_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_name IS 'Name of exposure type.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_description IS 'Description of exposure.';

COMMENT ON COLUMN "public".exposure_type.exposure_type_total_units IS 'Units determining how the exposure is cumulated (e.g. pack-years for smoking).';

CREATE  TABLE "public".observation_type ( 
	observation_type_id  serial  NOT NULL ,
	observation_category smallint   ,
	observation_name     varchar  NOT NULL ,
	observation_units    varchar  NOT NULL ,
	observation_regexp   varchar   ,
	CONSTRAINT pk_observation_types_observation_id PRIMARY KEY ( observation_type_id )
 );

COMMENT ON COLUMN "public".observation_type.observation_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".observation_type.observation_category IS 'Values:\n1 = Observation from clinical interaction only (e.g. capillary refill)\n2 = Observation derived from a score or rule (e.g. AVPU scale)\n3 = Observation from a measurement device (e.g. blood pressure)\n4 = Observation derived from a setting on a device (e.g. PEEP)';

COMMENT ON COLUMN "public".observation_type.observation_name IS 'Name of observation (e.g. temperature, heart rate).';

COMMENT ON COLUMN "public".observation_type.observation_units IS 'Units for this type of observation.';

COMMENT ON COLUMN "public".observation_type.observation_regexp IS 'Regular expression used to validate observations.';

CREATE  TABLE "public".patient_data ( 
	patient_uid          char(128)  NOT NULL ,
	patient_site_uid     char(128)  NOT NULL ,
	patient_site_code    varchar   ,
	patient_transfer_site_code date   ,
	patient_covid_status smallint   ,
	patient_birth_date   date   ,
	patient_birth_sex    char(1)   ,
	patient_birth_country char(2)   ,
	patient_ethnicity    smallint   ,
	patient_pregnant     bool   ,
	patient_postal_district char(3)   ,
	patient_assisted_living smallint   ,
	patient_code_status  smallint   ,
	patient_death        bool   ,
	patient_death_cause  varchar   ,
	patient_last_fu_date date   ,
	CONSTRAINT pk_patient_data_patient_id PRIMARY KEY ( patient_uid )
 );

COMMENT ON TABLE "public".patient_data IS 'Table for temporally invariant patient characteristics.';

COMMENT ON COLUMN "public".patient_data.patient_uid IS 'Primary key of this table. Globally unique identifier for a patient with a given RAMQ number. Generated deterministically from RAMQ number via PBKDF2. Not traceable back to patient; follows NIST best practices for cryptographically secure storage of password keys.\n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.patient_site_uid IS 'Per-site unique identifier, generated deterministically from unique local site ID via PBKDF2. \n\nProcedure for generation: https://bit.ly/39ANAXa';

COMMENT ON COLUMN "public".patient_data.patient_site_code IS 'Standardized code for the site at which the data was acquired.\n\nReference codes: https://bit.ly/2Jyw7nN';

COMMENT ON COLUMN "public".patient_data.patient_transfer_site_code IS 'Site code of the transferring institution, if the patient has been transferred from elsewhere.';

COMMENT ON COLUMN "public".patient_data.patient_covid_status IS 'COVID status of the patient.\n1 = Positive at current site\n2 = Negative at current site\n3 = Positive at other site (transferred + patient)\n4 = Negative at other site (transferred - patient)\n5 = Test result pending\n6 = Not tested for COVID';

COMMENT ON COLUMN "public".patient_data.patient_birth_date IS 'Birth date of the patient. Should be replaced by patient_age, computed as per the most recent birth date, in de-identified data exports.';

COMMENT ON COLUMN "public".patient_data.patient_birth_sex IS 'Equals "F" if the patient''s sex at birth is female, "M" if the patient''s sex at birth is male.';

COMMENT ON COLUMN "public".patient_data.patient_birth_country IS 'Country of origin, as 2-letter ISO 3166 code (e.g. CA).';

COMMENT ON COLUMN "public".patient_data.patient_ethnicity IS 'Ethnicity of the patient, as defined by WHO CRF.\n1 = Arab\n2 = Black\n3 = East Asian\n4 = South Asian\n5 = West Asian\n6 = Latin American\n7 = White\n8 = Aboriginal / First Nations\n9 = Other\n10 = Unknown';

COMMENT ON COLUMN "public".patient_data.patient_pregnant IS 'True if the was pregnant at the time of COVID testing.';

COMMENT ON COLUMN "public".patient_data.patient_postal_district IS 'First 3 letters of postal code of the patient (e.g. H3V).';

COMMENT ON COLUMN "public".patient_data.patient_assisted_living IS 'True if the patient lives in an assisted living facility (semi-autonomous residence or long-term care facility).';

COMMENT ON COLUMN "public".patient_data.patient_code_status IS 'Level of intervention, where:\n1 = full code\n2 = intubation, but no code\n3 = medical therapy only\n4 = comfort care only';

COMMENT ON COLUMN "public".patient_data.patient_death IS 'Equals 1 if the patient has died.';

COMMENT ON COLUMN "public".patient_data.patient_death_cause IS 'ICD code representing the cause of death.';

COMMENT ON COLUMN "public".patient_data.patient_last_fu_date IS 'Date of last follow-up at which the mortality status of the patient was assessed.';

CREATE  TABLE "public".pcr_data ( 
	patient_uid          char(128)  NOT NULL ,
	pcr_data_id          serial  NOT NULL ,
	pcr_name             varchar(100)   ,
	pcr_loinc_code       timestamptz   ,
	pcr_sample_time      timestamptz   ,
	pcr_sample_site      smallint   ,
	pcr_sample_rejected  bool   ,
	pcr_result_time      timestamptz   ,
	pcr_result_positive  bool   ,
	CONSTRAINT pk_pcr_data_id PRIMARY KEY ( pcr_data_id )
 );

COMMENT ON COLUMN "public".pcr_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".pcr_data.pcr_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".pcr_data.pcr_name IS 'Name of the PCR test being performed (e.g. "SaRS-CoV-2 PCR").';

COMMENT ON COLUMN "public".pcr_data.pcr_loinc_code IS 'LOINC code identifying the test kit used for PCR testing. If a non-commercial kit was used, the appropriate code is 94500-6.\n\nReference: https://bit.ly/2wQJfly';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_time IS 'Timestamp, with timezone, indicating the time at which the sample was drawn.';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_site IS 'Type of sample collected.\n1 = Nasopharyngeal swab\n2 = Oropharyngeal swab\n3 = Combined NP + OP swab\n4 = Expectorated sputum\n5 = Bronchial aspirate\n6 = Bronchoalveolar lavage\n7 = Feces/rectal swab\n8 = Urine specimen';

COMMENT ON COLUMN "public".pcr_data.pcr_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".pcr_data.pcr_result_time IS 'Timestamp, with timezone, indicating the time at which the PCR test was resulted.';

COMMENT ON COLUMN "public".pcr_data.pcr_result_positive IS 'True if the result from the PCR test was positive.';

CREATE  TABLE "public".signal_data ( 
	patient_uid          char(128)  NOT NULL ,
	signal_data_id       serial  NOT NULL ,
	signal_type          smallint   ,
	signal_num_channels  smallint   ,
	signal_sampling_freq smallint   ,
	signal_data_uri      varchar   ,
	signal_start_time    timestamptz   ,
	signal_end_time      timestamptz   ,
	CONSTRAINT pk_signal_data_id PRIMARY KEY ( signal_data_id )
 );

COMMENT ON TABLE "public".signal_data IS 'Raw signal data (e.g. EKG, pulse oximeter, arterial line)';

COMMENT ON COLUMN "public".signal_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".signal_data.signal_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".signal_data.signal_type IS 'Type of signal being recorded.\n1 = arterial blood pressure\n2 = pulmonary artery pressure\n3 = pulse oximetry\n4 = ventilator pressure\n5 = ventilator volume\n6 = waveform capnography\n7 = electrocardiogram';

COMMENT ON COLUMN "public".signal_data.signal_num_channels IS 'The number of channels in the signal being recorded.';

COMMENT ON COLUMN "public".signal_data.signal_sampling_freq IS 'Sampling frequency, in hertz.';

COMMENT ON COLUMN "public".signal_data.signal_data_uri IS 'Unique resource identifier pointing to the file on disk where the signal is stored.';

COMMENT ON COLUMN "public".signal_data.signal_start_time IS 'Timestamp, with timezone, indicating when the signal recording started.';

COMMENT ON COLUMN "public".signal_data.signal_end_time IS 'Timestamp, with timezone, indicating when the signal recording ended.';

CREATE  TABLE "public".symptom_data ( 
	patient_uid          char(128)  NOT NULL ,
	symptom_data_id      serial  NOT NULL ,
	symptom_snomed_code  varchar   ,
	symptom_name         varchar(100)   ,
	symptom_details      varchar   ,
	symptom_source       varchar   ,
	symptom_start_time   timestamptz   ,
	symptom_end_time     timestamptz   ,
	CONSTRAINT pk_symptom_data_symptom_data_id PRIMARY KEY ( symptom_data_id )
 );

COMMENT ON TABLE "public".symptom_data IS 'Data for symptoms experienced by the patient.';

COMMENT ON COLUMN "public".symptom_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".symptom_data.symptom_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".symptom_data.symptom_snomed_code IS 'SNOMED CT code representing the symptom.';

COMMENT ON COLUMN "public".symptom_data.symptom_name IS 'Name of the symptom experienced.';

COMMENT ON COLUMN "public".symptom_data.symptom_details IS 'Free text containing any additional details about symptoms experienced.';

COMMENT ON COLUMN "public".symptom_data.symptom_source IS 'Data source that was used to collect information on this symptom.';

COMMENT ON COLUMN "public".symptom_data.symptom_start_time IS 'Timestamp, with timezone, indicating time at which the symptoms started.';

COMMENT ON COLUMN "public".symptom_data.symptom_end_time IS 'Timestamp, with timezone, indicating time at which the symptoms ended.';

CREATE  TABLE "public".culture_data ( 
	patient_uid          char(128)  NOT NULL ,
	culture_data_id      integer  NOT NULL ,
	culture_type         smallint   ,
	culture_loinc_code   varchar   ,
	culture_sample_site  smallint   ,
	culture_sample_time  timestamptz   ,
	culture_sample_rejected bool   ,
	culture_result_time  timestamptz   ,
	culture_gram_positive bool   ,
	culture_growth_positive bool   ,
	culture_result_organisms bool   ,
	CONSTRAINT pk_culture_data_id PRIMARY KEY ( culture_data_id )
 );

COMMENT ON COLUMN "public".culture_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".culture_data.culture_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".culture_data.culture_type IS 'Type of culture obtained.\n1 = Bacterial culture (aerobic)\n2 = Bacterial culture (anaerobic)\n3 = Fungal culture\n4 = Mycobacterial culture';

COMMENT ON COLUMN "public".culture_data.culture_loinc_code IS 'LOINC code of the culture being performed.';

COMMENT ON COLUMN "public".culture_data.culture_sample_site IS 'Site from which the culture sample was collected.\n1 = Expectorated sputum\n2 = Endotracheal aspirate\n3 = Bronchoalveolar lavage\n4 = Pleural fluid\n5 = Ascites fluid\n6 = Blood culture\n7 = Urine culture\n8 = CSF culture\n9 = Other';

COMMENT ON COLUMN "public".culture_data.culture_sample_time IS 'Timestamp, with time zone, of sampling.';

COMMENT ON COLUMN "public".culture_data.culture_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".culture_data.culture_result_time IS 'Timestamp, with time zone, indicating the time at which the culture was resulted.';

COMMENT ON COLUMN "public".culture_data.culture_gram_positive IS 'Equals true if the Gram stain is positive.';

COMMENT ON COLUMN "public".culture_data.culture_growth_positive IS 'Equals true if the culture yielded growth of a pathogen in significant quantities (e.g. any quantity for blood, > 10^3 CFUs for LBA sputum)';

COMMENT ON COLUMN "public".culture_data.culture_result_organisms IS 'Comma-separated list of organisms that have grown on the culture medium. Organisms should be stated with their full name (e.g. Staphylococcus aureus).';

CREATE  TABLE "public".drug_data ( 
	patient_uid          char(128)  NOT NULL ,
	drug_data_id         serial  NOT NULL ,
	drug_name            varchar(100)   ,
	drug_din_code        varchar   ,
	drug_class           varchar   ,
	drug_infusion        bool   ,
	drug_dose            varchar   ,
	drug_rate            float8   ,
	drug_roa             varchar   ,
	drug_frequency       smallint   ,
	drug_start_time      timestamptz   ,
	drug_end_time        timestamptz   ,
	CONSTRAINT pk_drug_data_id PRIMARY KEY ( drug_data_id )
 );

COMMENT ON COLUMN "public".drug_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".drug_data.drug_name IS 'Generic name of drug that was administered.';

COMMENT ON COLUMN "public".drug_data.drug_din_code IS 'Standard Drug Identification Number (DIN).\n\nReference: https://bit.ly/2R8jPGC';

COMMENT ON COLUMN "public".drug_data.drug_class IS 'Standard drug class.';

COMMENT ON COLUMN "public".drug_data.drug_infusion IS 'True if the drug is administered via a continuous infusion.';

COMMENT ON COLUMN "public".drug_data.drug_dose IS 'Dose of the drug administered at a time.';

COMMENT ON COLUMN "public".drug_data.drug_rate IS 'Drug infusion rate, for continuous infusions.';

COMMENT ON COLUMN "public".drug_data.drug_roa IS 'Drug route of administration short name, as defined by FDA standards (e.g. IV, SC, PO). \n\nReference: https://bit.ly/3dRlo5z';

COMMENT ON COLUMN "public".drug_data.drug_frequency IS '(If drug_infusion is FALSE). Frequency of drug administration, in number of times per day.';

COMMENT ON COLUMN "public".drug_data.drug_start_time IS 'Timezone, with timestamp, indicating the time at which the drug was started.';

COMMENT ON COLUMN "public".drug_data.drug_end_time IS 'Timezone, with timestamp, indicating the time at which the drug was stopped.';

CREATE  TABLE "public".episode_data ( 
	patient_uid          char(128)  NOT NULL ,
	episode_data_id      serial  NOT NULL ,
	episode_unit_type    smallint   ,
	episode_ctas         date   ,
	episode_start_time   timestamptz   ,
	episode_end_time     timestamptz   ,
	CONSTRAINT pk_episode_data_id PRIMARY KEY ( episode_data_id )
 );

COMMENT ON TABLE "public".episode_data IS 'Start and end type of patient presence on unit, with accompanying metadata.';

COMMENT ON COLUMN "public".episode_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".episode_data.episode_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".episode_data.episode_unit_type IS 'Type of unit:\n1 = Outpatient clinic\n2 = Emergency room\n3 = Hospital ward\n4 = High-dependency unit\n5 = Intensive care unit';

COMMENT ON COLUMN "public".episode_data.episode_ctas IS 'CTAS (Canadian Triage and Acuity Scale) level for initial presentation in ER.\nLevel 1 = Resuscitation\nLevel 2 = Emergent\nLevel 3 = Urgent\nLevel 4 = Less urgent\nLevel 5 = Non urgent\n\nShould be blank unless episode_unit_type == 2.';

COMMENT ON COLUMN "public".episode_data.episode_start_time IS 'Timestamp, with timezone, of when the episode started (e.g. triaged in the emergency room).';

COMMENT ON COLUMN "public".episode_data.episode_end_time IS 'Timestamp, with timezone, of when the episode ended (e.g. discharged from the emergency room).';

CREATE  TABLE "public".exposure_data ( 
	patient_uid          char(128)  NOT NULL ,
	exposure_data_id     integer  NOT NULL ,
	exposure_type_id     integer   ,
	exposure_total       timestamptz   ,
	exposure_details     varchar   ,
	exposure_start_time  timestamptz   ,
	exposure_end_time    timestamptz   ,
	CONSTRAINT pk_exposure_data_id PRIMARY KEY ( exposure_data_id )
 );

COMMENT ON TABLE "public".exposure_data IS 'Exposure dates and types.';

COMMENT ON COLUMN "public".exposure_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".exposure_data.exposure_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".exposure_data.exposure_type_id IS 'Identifier referencing the type of exposure.';

COMMENT ON COLUMN "public".exposure_data.exposure_total IS 'Cumulative exposure, if quantifiable. E.g. number of pack years smoked.';

COMMENT ON COLUMN "public".exposure_data.exposure_details IS 'Free text with additional details on exposure.';

COMMENT ON COLUMN "public".exposure_data.exposure_start_time IS 'Timestamp, with time zone, indicating when the exposure occurred (for a one-time exposure), or started (for an prolonged exposure).';

COMMENT ON COLUMN "public".exposure_data.exposure_end_time IS 'Timestamp, with time zone, indicating when the exposure ended.';

CREATE  TABLE "public".imaging_data ( 
	patient_uid          char(128)  NOT NULL ,
	imaging_data_id      serial  NOT NULL ,
	imaging_modality     timestamptz   ,
	imaging_iv_contrast  bool   ,
	imaging_manufacturer varchar   ,
	imaging_acquisition_time timestamptz   ,
	imaging_report_time  timestamptz   ,
	imaging_report_text  varchar(250)   ,
	CONSTRAINT pk_study_data_id PRIMARY KEY ( imaging_data_id )
 );

COMMENT ON COLUMN "public".imaging_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".imaging_data.imaging_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".imaging_data.imaging_modality IS 'Modality of the imaging that was performed, as defined by the DICOM "Modality" header (DICOM standard section C.7.3.1).\n\nExamples: CT, XR, US.\n\nReference: https://bit.ly/2X8Yv7Q';

COMMENT ON COLUMN "public".imaging_data.imaging_iv_contrast IS 'True if intravenous contrast was given during the imaging study.';

COMMENT ON COLUMN "public".imaging_data.imaging_manufacturer IS 'Manufacturer of the equipment that was used to acquire imaging, as defined by the DICOM "Manufacturer header."';

COMMENT ON COLUMN "public".imaging_data.imaging_acquisition_time IS 'Timestamp, with timezone, representing the time at which the study was performed.';

COMMENT ON COLUMN "public".imaging_data.imaging_report_time IS 'Timestamp, with timezone, indicating the time at which the imaging was reported.';

COMMENT ON COLUMN "public".imaging_data.imaging_report_text IS 'De-identified textual report of the imaging.';

CREATE  TABLE "public".intervention_data ( 
	patient_uid          char(128)  NOT NULL ,
	drug_data_id         integer   ,
	intervention_data_id serial  NOT NULL ,
	intervention_type_id smallint   ,
	intervention_details varchar(100)   ,
	intervention_start_time timestamptz   ,
	intervention_end_time timestamptz   ,
	CONSTRAINT pk_intervention_data_id PRIMARY KEY ( intervention_data_id ),
	CONSTRAINT unq_intervention_data_intervention_type_id UNIQUE ( intervention_type_id ) 
 );

COMMENT ON COLUMN "public".intervention_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".intervention_data.intervention_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".intervention_data.intervention_type_id IS 'Identifier referencing the type of intervention.';

COMMENT ON COLUMN "public".intervention_data.intervention_start_time IS 'Timestamp, with timezone, indicating the time at which the intervention was initiated.';

COMMENT ON COLUMN "public".intervention_data.intervention_end_time IS 'Timestamp, with timezone, indicating the time at which the intervention was completed.';

CREATE  TABLE "public".intervention_type ( 
	intervention_type_id serial  NOT NULL ,
	intervention_name    varchar   ,
	intervention_invasiveness serial   ,
	CONSTRAINT pk_respiratory_data_id PRIMARY KEY ( intervention_type_id )
 );

COMMENT ON COLUMN "public".intervention_type.intervention_type_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".intervention_type.intervention_name IS 'Name of intervention. E.g. prone ventilation, inhaled nitric oxide, tracheostomy, extracorporeal support.';

COMMENT ON COLUMN "public".intervention_type.intervention_invasiveness IS 'Level of invasiveness of the intervention type:\n1 = noninvasive intervention (e.g. proning)\n2 = drug administration\n3 = invasive bedside procedure (e.g. central line)\n4 = open surgical procedure (e.g. tracheostomy)';

CREATE  TABLE "public".lab_data ( 
	patient_uid          char(128)  NOT NULL ,
	lab_data_id          serial  NOT NULL ,
	lab_name             varchar(100)   ,
	lab_loinc_code       varchar   ,
	lab_cerner_code      varchar   ,
	lab_units            varchar   ,
	lab_sample_time      timestamptz   ,
	lab_sample_site      smallint   ,
	lab_sample_rejected  bool   ,
	lab_result_time      timestamptz   ,
	lab_result_value     float8   ,
	CONSTRAINT pk_lab_data_lab_data_id PRIMARY KEY ( lab_data_id )
 );

COMMENT ON TABLE "public".lab_data IS 'Contains data related to laboratory tests.';

COMMENT ON COLUMN "public".lab_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".lab_data.lab_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".lab_data.lab_name IS 'Name of laboratory test. \n\nReference: https://bit.ly/2UGF5pp\n\nCould be in: { haemoglobin, WBC count, lymphocyte count, neutrophil count, hematocrit, platelets, APTT, PT, INR, ALT, total bilirubin, AST, glucose, urea, lactate, creatinine, sodium, potassium, procalcitonin, CRP, LDH, D-dimer, fibrinogen, ferritin, triglycerides, IL-6, CD4, CD8, CD4/CD8 ratio, NT-proBNP, troponin, hsT, hsTnI, TnT, TnI }';

COMMENT ON COLUMN "public".lab_data.lab_loinc_code IS 'LOINC code for the laboratory test.';

COMMENT ON COLUMN "public".lab_data.lab_cerner_code IS 'Code for laboratory test.\n\nReference (for CERNER): https://bit.ly/2UGF5pp';

COMMENT ON COLUMN "public".lab_data.lab_units IS 'Reporting units for the lab test.\n\nCould be in: { g/L, g/dL, 10^9 cells/L, 10^3 cells/microL, cells/microL, seconds, U/L, micromol/L, mg/L, mg/dL, mmol/L, mg/dL, mEq/L }';

COMMENT ON COLUMN "public".lab_data.lab_sample_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was sampled.';

COMMENT ON COLUMN "public".lab_data.lab_sample_site IS 'For blood samples only: type of blood sample.\n1 = Venous blood\n2 = Arterial blood\n3 = Capillary blood\n4 = Blood (unspecified)';

COMMENT ON COLUMN "public".lab_data.lab_sample_rejected IS 'True if the sample was rejected by the laboratory.';

COMMENT ON COLUMN "public".lab_data.lab_result_time IS 'Timezone, with timestamp, indicating the time at which the laboratory test was resulted.';

COMMENT ON COLUMN "public".lab_data.lab_result_value IS 'Value of the laboratory result.';

CREATE  TABLE "public".observation_data ( 
	patient_uid          char(128)  NOT NULL ,
	observation_data_id  serial  NOT NULL ,
	observation_type_id  integer  NOT NULL ,
	observation_device   varchar   ,
	observation_start_time timestamptz   ,
	observation_end_time timestamptz   ,
	CONSTRAINT pk_clinical_data_id PRIMARY KEY ( observation_data_id )
 );

COMMENT ON COLUMN "public".observation_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".observation_data.observation_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".observation_data.observation_device IS 'Device that was used to perform the observation (e.g. blood pressure cuff, arterial line).';

COMMENT ON COLUMN "public".observation_data.observation_start_time IS 'Timestamp, with timezone, indicating the time at which the observation started.';

COMMENT ON COLUMN "public".observation_data.observation_end_time IS 'Timestamp, with timezone, indicating the time at which the observation ended. Empty if the observation is made at a single point in time.';

CREATE  TABLE "public".slice_data ( 
	patient_uid          char(128)  NOT NULL ,
	imaging_data_id      integer   ,
	slice_data_id        serial  NOT NULL ,
	slice_series_id      varchar   ,
	slice_data_uri       varchar   ,
	slice_view_position  varchar   ,
	slice_patient_position varchar   ,
	slice_image_orientation varchar   ,
	slice_image_position varchar   ,
	slice_window_center  varchar   ,
	slice_window_width   varchar   ,
	slice_pixel_spacing  varchar   ,
	slice_thickness      varchar   ,
	CONSTRAINT pk_dicom_data_id PRIMARY KEY ( slice_data_id )
 );

COMMENT ON TABLE "public".slice_data IS 'Diagnostic imaging data in DICOM format (X-ray, CT, ultrasound).';

COMMENT ON COLUMN "public".slice_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".slice_data.imaging_data_id IS 'Identifier that references the imaging study to which this slice belongs.';

COMMENT ON COLUMN "public".slice_data.slice_data_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".slice_data.slice_series_id IS 'As defined by the DICOM SeriesInstanceUID header (0020,000E).';

COMMENT ON COLUMN "public".slice_data.slice_data_uri IS 'Unique resource identifier pointing to the binary object representing the pixel data.';

COMMENT ON COLUMN "public".slice_data.slice_view_position IS 'As defined by the DICOM ViewPosition header (DICOM standard, C.8.1.1)\n\nShould be in: { AP, PA, LL, RL, RLD, LLD, RLO, LLO }';

COMMENT ON COLUMN "public".slice_data.slice_patient_position IS 'As defined by the DICOM PatientPosition header (DICOM standard C.7.3.1).\n\nShould be in: { HFP, HFS, HFDR, HFDL, FFDR, FFDL, FFP, FFS, LFP, LFS, RFP, RFS, AFDR, AFDL, PFDR, PFDL }';

COMMENT ON COLUMN "public".slice_data.slice_image_orientation IS 'Specifies the direction cosines of the first row and the first column with respect to the patient, as defined by the DICOM ImageOrientation header (DICOM standard C.7.6.2).\n\nShould be: a string containing a comma-separated list of 6 floating point numbers.';

COMMENT ON COLUMN "public".slice_data.slice_image_position IS 'Specifies the X, Y, and Z coordinates of the upper left hand corner of the image, as defined by the DICOM ImagePosition header (DICOM standard C.7.6.2)\n\nShould be: a string containing a comma-separated list of 3 floating point numbers.';

COMMENT ON COLUMN "public".slice_data.slice_window_center IS 'As defined by the DICOM WindowCenter header.';

COMMENT ON COLUMN "public".slice_data.slice_window_width IS 'As defined by the DICOM WindowWidth header.';

COMMENT ON COLUMN "public".slice_data.slice_pixel_spacing IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

COMMENT ON COLUMN "public".slice_data.slice_thickness IS 'For CT scans only. As defined in the PixelSpacing DICOM header.';

CREATE  TABLE "public".diagnosis_data ( 
	patient_uid          char(128)  NOT NULL ,
	episode_data_id      integer   ,
	diagnosis_id         serial  NOT NULL ,
	diagnosis_type       varchar   ,
	diagnosis_name       varchar(100)   ,
	diagnosis_icd_code   varchar   ,
	diagnosis_source     varchar   ,
	CONSTRAINT pk_outcome_data_id PRIMARY KEY ( diagnosis_id )
 );

COMMENT ON COLUMN "public".diagnosis_data.patient_uid IS 'Identifier referencing a specific individual in the patient_data table.';

COMMENT ON COLUMN "public".diagnosis_data.episode_data_id IS 'Identifier referencing episode during which a diagnosis was made.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_id IS 'Primary key of this table; implemented as an auto-incrementing integer.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_type IS 'Type of diagnosis recorded.\n1 = comorbidity prior to admission (BDCP type 1)\n2 = comorbidity after admission (BDCP type 2)\n3 = primary diagnosis (BDCP type M)\n4 = secondary diagnosis (BDCP type 3)\n\nReference: Canadian Norms for Codification of Medical Diagnoses, https://bit.ly/346yCHg';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_name IS 'Name of diagnosis that was recorded.\n\nCould be in: { viral pneumonitis, bacterial pneumonia, acute respiratory distress syndrome, pneumothorax, pleural effusion, cryptogenic organizing pneumonia, bronchiolitis, meningitis, seizure, stroke, congestive heart failure, endocarditis, myocarditis, pericarditis, atrial fibrillation, ventricular tachycardia/ventricular fibrillation, STEMI, NSTEMI, cardiac arrest, bactermia, disseminated intravascular coagulation, anemia, rhabdomyolysis, acute renal injury, acute renal failure, gastrointestinal hemorrhage, pancreatitis, liver dysfunction, hyperglycemia, hypoglycemia, home oxygen therapy, outpatient dialysis }';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_icd_code IS 'ICD-10 code referencing the diagnosis.';

COMMENT ON COLUMN "public".diagnosis_data.diagnosis_source IS 'Data source from which the diagnosis occurred.';

ALTER TABLE "public".culture_data ADD CONSTRAINT fk_culture_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".diagnosis_data ADD CONSTRAINT fk_outcome_data_episode_data FOREIGN KEY ( episode_data_id ) REFERENCES "public".episode_data( episode_data_id );

ALTER TABLE "public".diagnosis_data ADD CONSTRAINT fk_diagnosis_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".drug_data ADD CONSTRAINT fk_prescription_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".episode_data ADD CONSTRAINT fk_episode_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".exposure_data ADD CONSTRAINT fk_exposure_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".exposure_data ADD CONSTRAINT fk_exposure_data_exposure_type FOREIGN KEY ( exposure_type_id ) REFERENCES "public".exposure_type( exposure_type_id );

ALTER TABLE "public".imaging_data ADD CONSTRAINT fk_imaging_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".intervention_data ADD CONSTRAINT fk_intervention_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".intervention_data ADD CONSTRAINT fk_intervention_data_drug_data FOREIGN KEY ( drug_data_id ) REFERENCES "public".drug_data( drug_data_id );

ALTER TABLE "public".intervention_type ADD CONSTRAINT fk_intervention_type FOREIGN KEY ( intervention_type_id ) REFERENCES "public".intervention_data( intervention_type_id );

ALTER TABLE "public".lab_data ADD CONSTRAINT fk_lab_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".observation_data ADD CONSTRAINT fk_observation_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".observation_data ADD CONSTRAINT fk_observation_type FOREIGN KEY ( observation_type_id ) REFERENCES "public".observation_type( observation_type_id );

ALTER TABLE "public".pcr_data ADD CONSTRAINT fk_pcr_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".signal_data ADD CONSTRAINT fk_signal_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".slice_data ADD CONSTRAINT fk_slice_data_imaging_data FOREIGN KEY ( imaging_data_id ) REFERENCES "public".imaging_data( imaging_data_id );

ALTER TABLE "public".slice_data ADD CONSTRAINT fk_slice_data_culture_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );

ALTER TABLE "public".symptom_data ADD CONSTRAINT fk_symptom_data_patient_data FOREIGN KEY ( patient_uid ) REFERENCES "public".patient_data( patient_uid );]]></string>
		</script>
	</layout>
</project>